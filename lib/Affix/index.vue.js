"use strict";const e=require("vue"),t=require("../node_modules/@vueuse/core/index.js");require("../node_modules/tinycolor2/esm/tinycolor.js");const o=require("../_shared/utils/dom.js"),l=require("../_shared/utils/fn.js"),r=require("../_shared/utils/is.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const u=e.defineComponent({name:"Affix",__name:"index",props:{offsetTop:{default:0},offsetBottom:{default:void 0},target:{default:void 0},targetContainer:{default:void 0}},emits:["change"],setup(u,{expose:a,emit:i}){const n=u,s=i,{target:d,targetContainer:f,offsetTop:v,offsetBottom:c}=e.toRefs(n),m=e.ref(),p=e.ref(),g=e.computed((()=>r.isUndefined(d.value)?o.findFirstScrollableParent(m.value):o.getElement(d.value))),x=e.computed((()=>r.isUndefined(f.value)?o.findFirstScrollableParent(m.value):o.getElement(f.value))),h=e.ref(!1),y=e.ref({}),_=e.ref(0),B=e.ref(0);t.useResizeObserver(m,(()=>{const{width:e,height:t}=m.value.getBoundingClientRect();_.value=e,B.value=t,b()}),{box:"border-box"}),e.watch((()=>h.value),(e=>{s("change",e)}));const b=l.throttleByRaf((()=>{if(!g.value||!x.value||!p.value)return;const{top:e,bottom:t}=p.value.getBoundingClientRect(),{top:o,bottom:u}=x.value.getBoundingClientRect();h.value=r.isUndefined(c.value)?e-o<=v.value:u-t<=c.value,h.value?y.value=r.isUndefined(c.value)?{position:"fixed",top:l.valueToPx(o+v.value)}:{position:"fixed",bottom:l.valueToPx(c.value)}:y.value={}}));return t.useEventListener(g,"scroll",b),a({updatePosition(){b()}}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"wrapperRef",ref:p},[h.value?(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle({width:e.unref(l.valueToPx)(_.value),height:e.unref(l.valueToPx)(B.value)})},null,4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([{"yc-affix":h.value}]),style:e.normalizeStyle(y.value),ref_key:"affixRef",ref:m},[e.renderSlot(t.$slots,"default")],6)],512))}});module.exports=u;
