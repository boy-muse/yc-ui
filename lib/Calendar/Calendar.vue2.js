"use strict";const e=require("vue"),a=require("../node_modules/dayjs/dayjs.min.js");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const t=require("../_shared/icons/IconArrowRight.vue.js"),r=require("../_shared/utils/control.js"),o=require("../_shared/components/IconButton.vue.js");require("../_shared/components/ExpandTransition.vue.js");const l=require("../Button/index.js");require("../Radio/index.js");const d=require("./CalendarMonth.vue.js"),n=require("./CalendarYear.vue.js"),u=require("../Radio/RadioGroup.vue.js");require("../Radio/RadioGroup.vue2.js");const s={class:"yc-calendar-header"},c={class:"yc-calendar-header-left"},i={class:"yc-calendar-header-value"},m={class:"yc-calendar-header-right"},v={class:"yc-calendar-body"},f=e.defineComponent({name:"Calendar",__name:"Calendar",props:{modelValue:{default:void 0},defaultValue:{default:()=>new Date},mode:{default:void 0},defaultMode:{default:"month"},modes:{default:()=>["month","year"]}},emits:["update:modelValue","update:mode","change","panel-change"],setup(f,{emit:h}){const y=f,p=h,{modelValue:V,defaultValue:j,mode:C,defaultMode:q,modes:_}=e.toRefs(y),x=r(V,j.value,(e=>{p("update:modelValue",e),p("change",e)})),k=e.ref({});e.watch((()=>x.value),(e=>{const t=e?a(e):a();k.value={year:t.year(),month:t.month()+1,day:t.date()}}),{immediate:!0});const N=r(C,q.value,(e=>{p("update:mode",e),p("panel-change",x.value)})),g=e.computed((()=>{const e={month:"月",year:"年"};return _.value.map((a=>({label:e[a],value:a})))})),w=e=>{x.value=new Date(e.fullDate)},R=e=>{if("today"==e)return void(x.value=new Date);const{year:a,month:t}=k.value;if("next"==e){const e=t+1>12?1:t+1,r=t+1>12||"year"==N.value?1:0;if(k.value.year=a+r,"year"==N.value)return;k.value.month=e}else{const e=t-1<1?12:t-1,r=t-1<1||"year"==N.value?-1:0;if(k.value.year=a+r,"year"==N.value)return;k.value.month=e}};return(a,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-calendar",`yc-calendar-mode-${e.unref(N)}`])},[e.createElementVNode("div",s,[e.createElementVNode("div",c,[e.createVNode(e.unref(o),{class:"yc-calendar-header-icon",role:"button",tabindex:"0",size:28,"hover-size":28,onClick:r[0]||(r[0]=e=>R("pre"))},{default:e.withCtx((()=>[e.createVNode(e.unref(t),{rotate:180})])),_:1}),e.createElementVNode("div",i,[e.renderSlot(a.$slots,"header",{year:k.value.year,month:k.value.month},(()=>[e.createTextVNode(e.toDisplayString(k.value.year)+" 年 "+e.toDisplayString(k.value.month)+" 月 ",1)]),!0)]),e.createVNode(e.unref(o),{role:"button",tabindex:"0",class:"yc-calendar-header-icon",size:28,"hover-size":28,onClick:r[1]||(r[1]=e=>R("next"))},{default:e.withCtx((()=>[e.createVNode(e.unref(t))])),_:1}),e.createVNode(e.unref(l.default),{onClick:r[2]||(r[2]=e=>R("today")),size:"small"},{default:e.withCtx((()=>r[4]||(r[4]=[e.createTextVNode(" 今天 ")]))),_:1})]),e.createElementVNode("div",m,[e.createVNode(e.unref(u),{modelValue:e.unref(N),"onUpdate:modelValue":r[3]||(r[3]=a=>e.isRef(N)?N.value=a:null),options:g.value,type:"button",size:"small"},null,8,["modelValue","options"])])]),e.createElementVNode("div",v,["month"==e.unref(N)?(e.openBlock(),e.createBlock(d,{key:0,"computed-value":e.unref(x),recordDate:k.value,onCellClick:w},e.createSlots({_:2},[a.$slots.default?{name:"default",fn:e.withCtx((t=>[e.renderSlot(a.$slots,"default",e.normalizeProps(e.guardReactiveProps(t)),void 0,!0)])),key:"0"}:void 0]),1032,["computed-value","recordDate"])):(e.openBlock(),e.createBlock(n,{key:1,"computed-value":e.unref(x),"record-date":k.value,onCellClick:w},e.createSlots({_:2},[a.$slots.default?{name:"default",fn:e.withCtx((t=>[e.renderSlot(a.$slots,"default",e.normalizeProps(e.guardReactiveProps(t)),void 0,!0)])),key:"0"}:void 0]),1032,["computed-value","record-date"]))])],2))}});module.exports=f;
