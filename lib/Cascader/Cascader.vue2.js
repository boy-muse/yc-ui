"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const l=require("../_shared/utils/fn.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const a=require("./hooks/useContext.js"),u=require("../Input/index.js"),o=require("../InputTag/index.js"),r=require("../Trigger/index.js"),t=require("./CascaderPanel.vue.js"),n=require("./CascaderSearchPanel.vue.js"),i=require("./CascaderIcon.vue.js"),s=e.defineComponent({name:"Cascader",__name:"Cascader",props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{default:void 0},defaultValue:{default:e=>e.multiple?[]:""},options:{default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{default:void 0},allowSearch:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},inputValue:{default:void 0},defaultInputValue:{default:""},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},expandTrigger:{default:"click"},placeholder:{default:""},filterOption:{type:Function,default:(e,l)=>(l.label??"").toLowerCase().includes(e.toLowerCase())},popupContainer:{default:void 0},maxTagCount:{default:0},formatLabel:{type:Function,default:void 0},triggerProps:{default:()=>({})},loadMore:{type:Function,default:void 0},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{default:500},fieldNames:{default:()=>({})},valueKey:{default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},tagNowrap:{type:Boolean,default:!1}},emits:["update:modelValue","update:inputValue","update:popupVisible","change","input-value-change","clear","search","popup-visible-change","focus","blur"],setup(s,{emit:d}){const p=s,c=d,f=e.ref(),{computedValue:v,computedInputValue:h,computedVisible:m,selectOptions:y,searchDelay:b,multiple:g,pathMode:w,disabled:x,allowClear:C,allowSearch:k,loading:B,curLevel:V,curPath:q,getValueKey:j,getOption:_}=a.default().provide(p,c,f),S=e.computed((()=>{let e=!0;return e=w.value?g.value?v.value.flat(1).length:v.value.length:g.value?v.value.length:v.value,C.value&&!x.value&&!B.value&&!!e})),z=e.computed((()=>!k.value||B.value)),P=e.computed((()=>k.value&&h.value)),$=async(e,a="")=>{var u,o;switch(e){case"clear":v.value=g.value||w.value?[]:"",c("clear");break;case"search":await l.sleep(b.value),c("search",a);break;case"focus":{if(x.value)return;if(m.value)return null==(u=f.value)?void 0:u.blur();const e=j(g.value?v.value[0]:v.value),a=e?_(e):null;a?(q.value=a.nodePath.map((e=>e.index)),V.value=a.level):(q.value=[],V.value=1),m.value=!0,await l.sleep(0),null==(o=f.value)||o.focus()}break;case"blur":m.value=!1;break;case"updateValue":v.value=a.map((e=>e.value))}};return(l,a)=>(e.openBlock(),e.createBlock(e.unref(r),e.mergeProps({"popup-visible":e.unref(m),"onUpdate:popupVisible":a[11]||(a[11]=l=>e.isRef(m)?m.value=l:null),"popup-offset":4,"popup-container":l.popupContainer,disabled:e.unref(x),position:"bl",trigger:"focus","animation-name":"slide-dynamic-origin","prevent-focus":""},l.triggerProps),{content:e.withCtx((()=>[P.value?(e.openBlock(),e.createBlock(n,{key:0})):(e.openBlock(),e.createBlock(t,{key:1}))])),default:e.withCtx((()=>{var r,t;return[e.createElementVNode("div",{class:e.normalizeClass(["yc-cascader",{"yc-cascader-allow-clear":S.value,"yc-cascader-allow-search":e.unref(k)},l.$attrs.class]),style:e.normalizeStyle(l.$attrs.style)},[e.unref(g)?(e.openBlock(),e.createBlock(e.unref(o),{key:0,"input-value":e.unref(h),"onUpdate:inputValue":a[1]||(a[1]=l=>e.isRef(h)?h.value=l:null),"model-value":e.unref(y),placeholder:l.placeholder,readonly:z.value,disabled:e.unref(x),size:l.size,error:l.error,"max-tag-count":l.maxTagCount,"tag-nowrap":l.tagNowrap,ref_key:"inputRef",ref:f,onFocus:a[2]||(a[2]=e=>$("focus")),onBlur:a[3]||(a[3]=e=>$("blur")),onInput:a[4]||(a[4]=e=>$("search",e)),"onUpdate:modelValue":a[5]||(a[5]=e=>$("updateValue",e))},e.createSlots({suffix:e.withCtx((()=>[e.createVNode(i,{"popup-visible":e.unref(m),"allow-search":e.unref(k),loading:e.unref(B),"show-clear-btn":S.value,onClear:a[0]||(a[0]=e=>$("clear"))},null,8,["popup-visible","allow-search","loading","show-clear-btn"])])),_:2},[l.$slots.label?{name:"tag",fn:e.withCtx((a=>[e.renderSlot(l.$slots,"label",e.normalizeProps(e.guardReactiveProps(a)),void 0,!0)])),key:"0"}:void 0,l.$slots.prefix?{name:"prefix",fn:e.withCtx((()=>[e.renderSlot(l.$slots,"prefix",{},void 0,!0)])),key:"1"}:void 0]),1032,["input-value","model-value","placeholder","readonly","disabled","size","error","max-tag-count","tag-nowrap"])):(e.openBlock(),e.createBlock(e.unref(u),{key:1,modelValue:e.unref(h),"onUpdate:modelValue":a[7]||(a[7]=l=>e.isRef(h)?h.value=l:null),"show-input":e.unref(m),readonly:z.value,disabled:e.unref(x),size:l.size,error:l.error,placeholder:(null==(t=null==(r=e.unref(y)[0])?void 0:r.label)?void 0:t.toString())||"",ref_key:"inputRef",ref:f,onClick:a[8]||(a[8]=e=>$("focus")),onBlur:a[9]||(a[9]=e=>$("blur")),onInput:a[10]||(a[10]=e=>$("search",e))},e.createSlots({label:e.withCtx((()=>[e.renderSlot(l.$slots,"label",{data:e.unref(y)[0]},(()=>{var a,u;return[e.createElementVNode("span",{class:e.normalizeClass([{"yc-input-placeholder":!(null==(a=e.unref(y)[0])?void 0:a.label)}])},e.toDisplayString((null==(u=e.unref(y)[0])?void 0:u.label)||l.placeholder),3)]}),!0)])),suffix:e.withCtx((()=>[e.createVNode(i,{"popup-visible":e.unref(m),"allow-search":e.unref(k),loading:e.unref(B),"show-clear-btn":S.value,onClear:a[6]||(a[6]=e=>$("clear"))},null,8,["popup-visible","allow-search","loading","show-clear-btn"])])),_:2},[l.$slots.prefix?{name:"prefix",fn:e.withCtx((()=>[e.renderSlot(l.$slots,"prefix",{},void 0,!0)])),key:"0"}:void 0]),1032,["modelValue","show-input","readonly","disabled","size","error","placeholder"]))],6)]})),_:3},16,["popup-visible","popup-container","disabled"]))}});module.exports=s;
