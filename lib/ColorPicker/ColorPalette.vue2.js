"use strict";const e=require("vue"),l=require("../node_modules/@vueuse/core/index.js"),a=require("../_shared/utils/color.js");require("../_shared/utils/dom.js");const u=require("../_shared/utils/fn.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const o=e.defineComponent({__name:"ColorPalette",props:{color:{},baseColor:{},popupVisible:{type:Boolean},disabled:{type:Boolean},hideTrigger:{type:Boolean}},emits:["update:color","update:baseColor"],setup(o,{expose:r,emit:s}){const t=o,i=s,{popupVisible:n,baseColor:v,disabled:c,hideTrigger:d}=e.toRefs(t),p=e.ref(),f=e.ref(),{width:m,height:y,top:g,left:h}=l.useElementBounding(f,{updateTiming:"next-frame"}),b=e.computed((()=>a.parseColor(v.value).toHsv())),{x:_,y:C}=l.useDraggable(p,{disabled:c,onMove(){k()}}),x=e=>{c.value||(_.value=e.pageX,C.value=e.pageY,k())},k=()=>{_.value=(_.value-h.value)/m.value,_.value=_.value<0?0:_.value,_.value=_.value>1?1:_.value,C.value=(C.value-g.value)/y.value,C.value=C.value<0?0:C.value,C.value=C.value>1?1:C.value;const e=a.parseColor({...b.value,s:_.value,v:1-C.value}).toHexString();i("update:color",e)};return e.watch((()=>n.value),(async e=>{(e||d.value)&&(await u.sleep(0),_.value=b.value.s,C.value=1-b.value.v)}),{immediate:!0}),r({setPosition(e){const{s:l,v:u}=a.parseColor(e).toHsv();_.value=l,C.value=1-u}}),(l,a)=>(e.openBlock(),e.createElementBlock("div",{class:"yc-color-picker-palette",style:e.normalizeStyle({backgroundColor:e.unref(v)}),ref_key:"paletteRef",ref:f,onClick:x},[e.createElementVNode("div",{class:"yc-color-picker-handler",style:e.normalizeStyle({transform:`translate(calc(${e.unref(u.valueToPx)(e.unref(_)*e.unref(m))} - 50%),calc(${e.unref(u.valueToPx)(e.unref(C)*e.unref(y))} - 50%))`}),ref_key:"btnRef",ref:p},null,4)],4))}});module.exports=o;
