"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const t=require("../_shared/utils/fn.js"),o=require("../_shared/utils/is.js");require("../_shared/utils/time.js");const i=require("../_shared/utils/vue-utils.js");require("../Empty/index.js");const s=require("../_shared/utils/control.js");require("../_shared/icons/_Icon.vue.js");const r=require("../_shared/icons/IconArrowRight.vue.js"),l=require("./hooks/useContext.js");require("./index.js");const u=require("../Trigger/index.js"),n=require("../Scrollbar/index.js"),a=require("./Doption.vue.js"),d={class:"yc-dropdown-list"},p={key:0,class:"yc-dropdown-footer"},c=e.defineComponent({name:"Dsubmenu",__name:"Dsubmenu",props:{disabled:{type:Boolean,default:!1},trigger:{default:"click"},position:{default:"rt"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{default:()=>({})},popupMaxHeight:{default:200}},emits:["update:popupVisible","popup-visible-change"],setup(c,{expose:f,emit:m}){const v=c,g=m,{defaultPopupVisible:h,popupVisible:y,trigger:b,position:x,popupMaxHeight:_}=e.toRefs(v),{theme:j}=l().inject(),q=s(y,h.value,(e=>{g("update:popupVisible",e),g("popup-visible-change",e)})),w=e.ref(),V=e.ref(),k=e.computed((()=>["rt","lt"].includes(x.value)?x.value:"rt")),C=e.computed((()=>["hover","click"].includes(b.value)?b.value:"hover")),B=e.computed((()=>o.isBoolean(_.value)&&!_.value||o.isUndefined(_)?"":t.valueToPx(o.isBoolean(_.value)?200:_.value))),P=async()=>{var t;await e.nextTick();const o=i.unrefElement(w);if(!o)return;const{left:s,top:r,right:l,width:u}=o.getBoundingClientRect(),n="rt"==k.value?l:s-u,a=r-5;null==(t=V.value)||t.updatePosition(n,a)};return f({show(){q.value=!0},hide(){q.value=!1}}),(t,o)=>(e.openBlock(),e.createBlock(e.unref(u),e.mergeProps({"popup-visible":e.unref(q),"onUpdate:popupVisible":o[0]||(o[0]=t=>e.isRef(q)?q.value=t:null),trigger:C.value,position:k.value,"popup-offset":4,disabled:t.disabled,"mouse-enter-delay":150,"mouse-leave-delay":150,"on-trigger-mouseenter":P,"on-trigger-mouseclick":P,"need-transform-origin":"","auto-set-position":"","auto-fit-popup-min-width":"",ref_key:"triggerRef",ref:V},t.triggerProps),{content:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["yc-dropdown",`yc-dropdown-theme-${e.unref(j)}`])},[e.createVNode(e.unref(n),{style:e.normalizeStyle({maxHeight:B.value})},{default:e.withCtx((()=>[e.createElementVNode("div",d,[e.renderSlot(t.$slots,"content",{},void 0,!0)])])),_:3},8,["style"]),t.$slots.footer?(e.openBlock(),e.createElementBlock("div",p,[e.renderSlot(t.$slots,"footer",{},void 0,!0)])):e.createCommentVNode("",!0)],2)])),default:e.withCtx((()=>[e.createVNode(e.unref(a),{disabled:t.disabled,theme:e.unref(j),class:e.normalizeClass(t.$attrs.class),style:e.normalizeStyle(t.$attrs.style),"is-submenu":"",ref_key:"optionRef",ref:w},{suffix:e.withCtx((()=>[e.createVNode(e.unref(r))])),default:e.withCtx((()=>[e.renderSlot(t.$slots,"default",{},void 0,!0)])),_:3},8,["disabled","theme","class","style"])])),_:3},16,["popup-visible","trigger","position","disabled"]))}});module.exports=c;
