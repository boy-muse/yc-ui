"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const t=require("../_shared/utils/fn.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const i=require("../_shared/icons/IconImageClose.vue.js"),o=require("../_shared/utils/control.js"),r=require("./hooks/useContext.js"),l=require("../Spin/index.js"),a=require("./ImagePreview.vue.js"),s=["src","title","alt"],n={key:1,class:"yc-image-overlay"},c={class:"yc-image-loader"},d={key:2,class:"yc-image-overlay"},u={class:"yc-image-error"},m={class:"yc-image-error-icon"},v={class:"yc-image-error-alt"},p={class:"yc-image-footer-caption"},f=["title"],y=["title"],g={key:0,class:"yc-image-footer-extra"},h=e.defineComponent({name:"Image",__name:"Image",props:{src:{default:""},width:{},height:{},title:{default:""},description:{default:""},fit:{},alt:{},hideFooter:{type:[Boolean,String],default:!1},footerPosition:{default:"inner"},showLoader:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},previewVisible:{type:Boolean,default:void 0},defaultPreviewVisible:{type:Boolean,default:!1},previewProps:{default:()=>({})},footerClass:{default:""}},emits:["update:previewVisible","preview-visible-change"],setup(h,{emit:w}){const k=h,V=w,{src:B,preview:E,previewVisible:N,defaultPreviewVisible:C}=e.toRefs(k),{hasGroupFather:j,handleClick:x}=r().inject(),S=o(N,C.value,(e=>{V("update:previewVisible",e),V("preview-visible-change",e)})),b=e.ref(!1),q=e.ref(!1),P=()=>{q.value=!1,b.value=!1},_=()=>{q.value=!1,b.value=!0},$=()=>{if(j.value)return x(B.value);E.value&&(S.value=!0)};return e.watch((()=>B.value),(()=>{q.value=!0,b.value=!1}),{immediate:!0}),(o,r)=>(e.openBlock(),e.createElementBlock("div",{class:"yc-image",style:e.normalizeStyle({width:e.unref(t.valueToPx)(o.width),height:e.unref(t.valueToPx)(o.height)})},[e.createElementVNode("img",{src:e.unref(B),title:o.title,alt:o.alt??o.description,style:e.normalizeStyle({width:e.unref(t.valueToPx)(o.width),height:e.unref(t.valueToPx)(o.height),objectFit:o.fit}),class:"yc-image-img",onLoad:P,onError:_,onClick:$},null,44,s),e.unref(E)?(e.openBlock(),e.createBlock(a,e.mergeProps({key:0,visible:e.unref(S),"onUpdate:visible":r[0]||(r[0]=t=>e.isRef(S)?S.value=t:null),src:e.unref(B)},o.previewProps),e.createSlots({_:2},[o.$slots["preview-actions"]?{name:"actions",fn:e.withCtx((()=>[e.renderSlot(o.$slots,"preview-actions",{},void 0,!0)])),key:"0"}:void 0]),1040,["visible","src"])):e.createCommentVNode("",!0),(o.showLoader||o.$slots.loader)&&q.value?(e.openBlock(),e.createElementBlock("div",n,[e.createElementVNode("div",c,[e.renderSlot(o.$slots,"loader",{},(()=>[e.createVNode(e.unref(l),{size:30,tip:"加载中"})]),!0)])])):e.createCommentVNode("",!0),b.value?(e.openBlock(),e.createElementBlock("div",d,[e.renderSlot(o.$slots,"error",{},(()=>[e.createElementVNode("div",u,[e.renderSlot(o.$slots,"error-icon",{},(()=>[e.createElementVNode("div",m,[e.createVNode(e.unref(i),{size:60})])]),!0),e.createElementVNode("div",v,e.toDisplayString(o.alt??o.description),1)])]),!0)])):e.createCommentVNode("",!0),!o.hideFooter&&(o.title||o.description||o.$slots.extra)?(e.openBlock(),e.createElementBlock("div",{key:3,class:e.normalizeClass(["yc-image-footer","inner"==o.footerPosition?"yc-image-footer-inner":"yc-image-footer-outer",o.footerClass])},[e.createElementVNode("div",p,[e.createElementVNode("div",{class:"yc-image-footer-caption-title",title:o.title},e.toDisplayString(o.title),9,f),e.createElementVNode("div",{class:"yc-image-footer-caption-description",title:o.description},e.toDisplayString(o.description),9,y)]),o.$slots.extra?(e.openBlock(),e.createElementBlock("div",g,[e.renderSlot(o.$slots,"extra",{},void 0,!0)])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],4))}});module.exports=h;
