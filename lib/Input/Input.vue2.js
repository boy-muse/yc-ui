"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js");const t=require("../_shared/utils/global-config.js"),o=require("../_shared/utils/control.js"),l=require("./hooks/useLimitedInput.js"),n=require("../_shared/components/IconButton.vue.js"),s=require("../_shared/components/PreventFocus.vue.js");require("../_shared/components/ExpandTransition.vue.js");const i=require("./InputSuffix.vue.js"),a=["value","type","disabled","readonly","placeholder"],r=e.defineComponent({name:"Input",__name:"Input",props:{modelValue:{default:void 0},defaultValue:{default:""},size:{default:void 0},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:void 0},placeholder:{default:""},maxLength:{default:void 0},wordLength:{type:Function,default:e=>e.length},wordSlice:{type:Function,default:(e,t)=>e.slice(0,t)},showWordLimit:{type:Boolean,default:!1},inputAttrs:{default:()=>({})},isPassword:{type:Boolean,default:!1},visibility:{type:Boolean,default:void 0},defaultVisibility:{type:Boolean,default:!1},invisibleButton:{type:Boolean,default:!0},showInput:{type:Boolean,default:!1}},emits:["update:modelValue","update:visibility","input","change","visibility-change","pressEnter","keydown","clear","focus","blur"],setup(r,{expose:u,emit:d}){const p=r,c=d,{visibility:f,defaultVisibility:y}=e.toRefs(p),{size:m}=t.getGlobalConfig(p),h=e.ref(),v=o(f,y.value,(e=>{c("update:visibility",e),c("visibility-change",e)})),b=e.computed((()=>v.value?"password":"text")),{computedValue:w,showWordLimit:k,showClearBtn:B,curLength:C,maxLength:g,error:x,handleInput:$,handleComposition:_}=l({props:p,emits:c,inputRef:h}),V=async(e,t)=>{switch(e){case"input":$(t);break;case"change":c("change",w.value,t);break;case"focus":case"blur":c(e,t);break;case"clear":w.value="",c("clear",t);break;case"keydown":{const e=t;c("keydown",e),"Enter"==e.key&&c("pressEnter",e)}}};return u({focus(){var e;null==(e=h.value)||e.focus()},blur(){var e;null==(e=h.value)||e.blur()},getInputRef:()=>h.value}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-input-outer",`yc-input-size-${e.unref(m)}`,{"yc-input-disabled":t.disabled,"yc-input-error":e.unref(x),"yc-input-has-prepend":t.$slots.prepend,"yc-input-has-append":t.$slots.append}])},[t.$slots.prepend?(e.openBlock(),e.createBlock(e.unref(s),{key:0,class:"yc-input-prepend"},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"prepend",{},void 0,!0)])),_:3})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(["yc-input-wrapper",{"yc-input-wrapper-disabled":t.disabled}])},[t.$slots.prefix?(e.openBlock(),e.createBlock(e.unref(s),{key:0,class:"yc-input-prefix"},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"prefix",{},void 0,!0)])),_:3})):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("input",e.mergeProps({value:e.unref(w),type:b.value,disabled:t.disabled,readonly:t.readonly,placeholder:t.placeholder},t.inputAttrs,{class:"yc-input",ref_key:"inputRef",ref:h,onInput:o[0]||(o[0]=e=>V("input",e)),onChange:o[1]||(o[1]=e=>V("change",e)),onCompositionstart:o[2]||(o[2]=(...t)=>e.unref(_)&&e.unref(_)(...t)),onCompositionupdate:o[3]||(o[3]=(...t)=>e.unref(_)&&e.unref(_)(...t)),onCompositionend:o[4]||(o[4]=(...t)=>e.unref(_)&&e.unref(_)(...t)),onFocus:o[5]||(o[5]=e=>V("focus",e)),onBlur:o[6]||(o[6]=e=>V("blur",e)),onKeydown:o[7]||(o[7]=e.withKeys((e=>V("keydown",e)),["enter"]))}),null,16,a),[[e.vShow,!t.$slots.label||t.$slots.label&&t.showInput]]),t.$slots.label?e.withDirectives((e.openBlock(),e.createBlock(e.unref(s),{key:1,class:"yc-input text-ellipsis"},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"label",{},void 0,!0)])),_:3},512)),[[e.vShow,!t.showInput]]):e.createCommentVNode("",!0),e.unref(B)?(e.openBlock(),e.createBlock(e.unref(n),{key:2,class:"yc-input-clear-button",onClick:o[8]||(o[8]=e=>V("clear",e))})):e.createCommentVNode("",!0),t.$slots.suffix||e.unref(k)||t.isPassword&&t.invisibleButton?(e.openBlock(),e.createBlock(i,{key:3,"cur-length":e.unref(C),"max-length":e.unref(g),"computed-value":e.unref(w),"show-word-limit":e.unref(k),"computed-visibility":e.unref(v),"invisible-button":t.invisibleButton,"is-password":t.isPassword,onVisibilityChange:o[9]||(o[9]=e=>v.value=e)},e.createSlots({_:2},[t.$slots.suffix?{name:"suffix",fn:e.withCtx((()=>[e.renderSlot(t.$slots,"suffix",{},void 0,!0)])),key:"0"}:void 0]),1032,["cur-length","max-length","computed-value","show-word-limit","computed-visibility","invisible-button","is-password"])):e.createCommentVNode("",!0)],2),t.$slots.append?(e.openBlock(),e.createBlock(e.unref(s),{key:1,class:"yc-input-append"},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"append",{},void 0,!0)])),_:3})):e.createCommentVNode("",!0)],2))}});module.exports=r;
