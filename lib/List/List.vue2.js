"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const t=require("../_shared/utils/fn.js");require("../_shared/utils/time.js");const l=require("../_shared/utils/vue-utils.js"),o=require("../_shared/utils/global-config.js"),r=require("../_shared/utils/control.js"),a=require("./hooks/useScrollReach.js"),s=require("../Spin/index.js"),i=require("../Scrollbar/index.js"),n=require("../Pagination/index.js"),u=require("../Grid/index.js"),d=require("./ListVirtual.vue.js");require("./ListVirtual.vue2.js");const c=require("./ListItem.vue.js"),v=require("../Grid/GridItem.vue.js"),m={class:"yc-list-content-wrapper"},f={key:0,class:"yc-list-header"},p={key:2,role:"list",class:"yc-list-content"},g={key:4,class:"yc-list-footer"},y=e.defineComponent({name:"List",__name:"List",props:{data:{default:()=>[]},size:{default:void 0},bordered:{type:Boolean,default:!0},split:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},paginationProps:{default:void 0},gridProps:{default:void 0},maxHeight:{default:void 0},bottomOffset:{default:0},virtualListProps:{default:void 0},scrollbar:{type:Boolean,default:!0}},emits:["scroll","reach-bottom","page-change","page-size-change"],setup(y,{emit:h}){var k,B;const x=y,b=h,{data:S,paginationProps:q,virtualListProps:_,gridProps:j,bottomOffset:C}=e.toRefs(x),{size:z,renderEmpty:P}=o.getGlobalConfig(x),$=e.ref(!1),L=e.ref(),R=e.ref(),V=e.computed((()=>!(!_.value||q.value||j.value)&&(_.value.itemHeight&&(!_.value.threshold||_.value.threshold>S.value.length)))),E=e.computed((()=>{var e;return V.value?l.unrefElement(R):null==(e=L.value)?void 0:e.getScrollRef()}));a({scrollRef:E,offset:{bottom:C.value},onScroll:(e,t)=>{$.value=t.bottom,b("scroll",e)},onReachBottom:e=>{b("reach-bottom",e)}});const w=e.computed((()=>{var e;return null==(e=q.value)?void 0:e.current})),N=r(w,(null==(k=q.value)?void 0:k.current)||1,(e=>{b("page-change",e)})),H=e.computed((()=>{var e;return null==(e=q.value)?void 0:e.pageSize})),G=r(H,(null==(B=q.value)?void 0:B.defaultPageSize)||10,(e=>{N.value=1,b("page-change",e)})),F=e.computed((()=>q.value?S.value.slice((N.value-1)*G.value,N.value*G.value):S.value));return(l,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-list-wrapper",`yc-list-size-${e.unref(z)}`,{"yc-list-bordered":l.bordered,"yc-list-hoverable":l.hoverable,"yc-list-split":l.split}])},[e.createVNode(e.unref(s),{loading:l.loading,class:"yc-list-spin"},{default:e.withCtx((()=>{var r;return[e.createVNode(e.unref(i),{scrollbar:l.scrollbar,style:e.normalizeStyle({maxHeight:V.value?"":e.unref(t.valueToPx)(l.maxHeight)}),class:"yc-list",ref_key:"realListRef",ref:L},{default:e.withCtx((()=>[e.createElementVNode("div",m,[l.$slots.header?(e.openBlock(),e.createElementBlock("div",f,[e.renderSlot(l.$slots,"header",{},void 0,!0)])):e.createCommentVNode("",!0),V.value?(e.openBlock(),e.createBlock(d,{key:1,data:e.unref(S),"virtual-list-props":e.unref(_),style:e.normalizeStyle({maxHeight:e.unref(t.valueToPx)(l.maxHeight)}),ref_key:"virtualListRef",ref:R},e.createSlots({_:2},[l.$slots.item?{name:"item",fn:e.withCtx((t=>[e.renderSlot(l.$slots,"item",e.normalizeProps(e.guardReactiveProps(t)),void 0,!0)])),key:"0"}:void 0]),1032,["data","virtual-list-props","style"])):(e.openBlock(),e.createElementBlock("div",p,[e.renderSlot(l.$slots,"default",{},void 0,!0),e.unref(j)?(e.openBlock(),e.createBlock(e.unref(u.default),e.normalizeProps(e.mergeProps({key:0},e.unref(j))),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(F.value,((t,o)=>(e.openBlock(),e.createBlock(e.unref(v),{key:o},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"item",{index:o,item:t},void 0,!0)])),_:2},1024)))),128))])),_:3},16)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(F.value,((t,o)=>e.renderSlot(l.$slots,"item",{key:o,index:o,item:t},void 0,!0))),128))])),l.$slots.default||F.value.length?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.$slots.empty||e.unref(P)("List")),{key:3})),l.$slots.footer?(e.openBlock(),e.createElementBlock("div",g,[e.renderSlot(l.$slots,"footer",{},void 0,!0)])):e.createCommentVNode("",!0),l.$slots["scroll-loading"]&&$.value?(e.openBlock(),e.createBlock(c,{key:5,class:"yc-list-scroll-loading"},{default:e.withCtx((()=>[e.renderSlot(l.$slots,"scroll-loading",{},void 0,!0)])),_:3})):e.createCommentVNode("",!0)])])),_:3},8,["scrollbar","style"]),e.unref(q)?(e.openBlock(),e.createBlock(e.unref(n),{key:0,current:e.unref(N),"onUpdate:current":o[0]||(o[0]=t=>e.isRef(N)?N.value=t:null),"page-size":e.unref(G),"onUpdate:pageSize":o[1]||(o[1]=t=>e.isRef(G)?G.value=t:null),total:(null==(r=e.unref(q))?void 0:r.total)||0},null,8,["current","page-size","total"])):e.createCommentVNode("",!0)]})),_:3},8,["loading"])],2))}});module.exports=y;
