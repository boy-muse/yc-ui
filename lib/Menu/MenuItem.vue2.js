"use strict";const e=require("vue"),t=require("../node_modules/@vueuse/core/index.js");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const u=require("../_shared/utils/fn.js"),l=require("../_shared/utils/is.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const o=require("./hooks/useContext.js"),n=require("./MenuPopOption.vue.js"),r=require("../Dropdown/index.js"),a=require("../Tooltip/index.js"),i={key:1,class:"yc-menu-icon"},s={key:2,class:"yc-menu-icon-suffix"},c=e.defineComponent({name:"MenuItem",__name:"MenuItem",props:{path:{default:""},disabled:{type:Boolean,default:!1}},setup(c){const d=c,{path:m,disabled:p}=e.toRefs(d),{reuse:v,define:f}=t.createReusableTemplate(),h=e.useAttrs(),{computedSelectedKeys:k,computedOpenKeys:y,computedCollapsed:g,levelIndent:x,mode:B,theme:w,autoOpen:C,autoOpenSelected:_,accordion:j,triggerProps:q,tooltipProps:N,autoScrollIntoView:V,scrollConfig:z,popupMaxHeight:I,menuTreeNodes:S,menuTree:M,max:E,menuItemWidths:P,emits:b}=o.default().inject(),$=e.computed((()=>S.value.find((e=>e.path==m.value))||{type:"menuitem",level:0})),O=e.computed((()=>M.value.findIndex((e=>e.path==m.value)))),T=e.computed((()=>{var e;return(null==(e=M.value[O.value])?void 0:e.children)||[]})),A=e.computed((()=>"submenu"==$.value.type)),D=e.computed((()=>0===$.value.level)),H=e.computed((()=>o.isMenuItemActive(M.value,m.value,k.value))),F=e.computed((()=>l.isUndefined(h.popupMaxHeight)?I.value:o.getPopupMaxHeight(h.popupMaxHeight))),R=e.ref(),K=e=>{k.value!=e&&(k.value=e,b("menu-item-click",e))},W=()=>{if(!("vertical"!=B.value&&A.value||g.value)){if(!A.value&&!p.value&&k.value!=m.value)return k.value=m.value,b("menu-item-click",m.value);y.value.includes(m.value)?y.value=y.value.filter((e=>e!=m.value)):y.value=j.value?[m.value]:[...y.value,m.value],b("sub-menu-click",m.value,y.value)}};return e.onMounted((()=>{var e;D.value&&(P.value[O.value]=R.value.offsetWidth),V.value&&k.value==m.value&&(null==(e=R.value)||e.scrollIntoView(z.value)),A.value&&C.value&&_.value&&H.value&&y.value.push(m.value)})),(t,l)=>O.value<e.unref(E)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["yc-menu-item-wrapper",{"yc-menu-item-mode-horizontal":"horizontal"==e.unref(B)}])},[e.createVNode(e.unref(f),null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["yc-menu-item",`yc-menu-item-theme-${e.unref(w)}`,{"yc-menu-item-selected":H.value,"yc-menu-item-disabled":e.unref(p),"yc-menu-item-collapsed":e.unref(g)}]),ref_key:"menuItemRef",ref:R,onClick:W},[D.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"yc-menu-indent",style:e.normalizeStyle({width:e.unref(u.valueToPx)(e.unref(x)*$.value.level),height:e.unref(u.valueToPx)(e.unref(x))})},null,4)),t.$slots.icon?(e.openBlock(),e.createElementBlock("div",i,[e.renderSlot(t.$slots,"icon",{},void 0,!0)])):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["yc-menu-item-title",{"text-ellipsis":"horizontal"!=e.unref(B)}])},[e.renderSlot(t.$slots,"default",{},void 0,!0)],2),[[e.vShow,!e.unref(g)]]),t.$slots.suffix?e.withDirectives((e.openBlock(),e.createElementBlock("div",s,[e.renderSlot(t.$slots,"suffix",{},void 0,!0)],512)),[[e.vShow,!e.unref(g)]]):e.createCommentVNode("",!0)],2)])),_:3}),A.value&&D.value&&("vertical"!=e.unref(B)||e.unref(g))?(e.openBlock(),e.createBlock(e.unref(r.default),{key:0,"popup-max-height":F.value,theme:e.unref(w),"trigger-props":{autoFitPosition:!1,position:"horizontal"==e.unref(B)?"bl":"rt",animationName:"horizontal"==e.unref(B)?"slide-dynamic-origin":"zoom-in-fade-out",popupOffset:"vertical"==e.unref(B)?14:20,showArrow:!0,...e.unref(q)},onSelect:K},{content:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.value,(t=>(e.openBlock(),e.createBlock(n,{key:t.path,"tree-node":t,"popup-max-height":F.value,"trigger-props":e.unref(q),"computed-selected-keys":e.unref(k)},null,8,["tree-node","popup-max-height","trigger-props","computed-selected-keys"])))),128))])),default:e.withCtx((()=>[e.createVNode(e.unref(v))])),_:1},8,["popup-max-height","theme","trigger-props"])):!A.value&&D.value&&e.unref(g)?(e.openBlock(),e.createBlock(e.unref(a),{key:1,position:"rt","trigger-props":{autoFitPosition:!1,popupOffset:"vertical"==e.unref(B)?14:18,showArrow:!0,...e.unref(N),...e.unref(q)}},{content:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.$slots.default)))])),default:e.withCtx((()=>[e.createVNode(e.unref(v))])),_:1},8,["trigger-props"])):(e.openBlock(),e.createBlock(e.unref(v),{key:2}))],2)):e.createCommentVNode("",!0)}});module.exports=c;
