"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const o=require("../_shared/utils/fn.js");require("../_shared/utils/time.js");const l=require("../_shared/utils/global-config.js"),t=require("./hooks/useModalClose.js"),a=require("./hooks/useModalDraggable.js"),n=require("../Button/index.js"),r=require("../_shared/components/IconButton.vue.js");require("../_shared/components/ExpandTransition.vue.js");const s={key:0,class:"yc-modal-footer"},i=e.defineComponent({name:"Modal",inheritAttrs:!1,__name:"Modal",props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{default:400},top:{default:100},mask:{type:Boolean,default:!0},title:{default:""},titleAlign:{default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},okText:{default:"确认"},cancelText:{default:"取消"},okLoading:{type:Boolean,default:!1},okButtonProps:{default:()=>({})},cancelButtonProps:{default:()=>({})},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{default:void 0},maskStyle:{default:()=>({})},modalClass:{default:""},modalStyle:{default:()=>({})},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{default:"fade"},modalAnimationName:{default:"zoom-modal"},bodyClass:{default:""},bodyStyle:{default:()=>({})},hideTitle:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},onBeforeCancel:{type:Function,default:()=>!0},onBeforeOk:{type:Function,default:()=>!0}},emits:["update:visible","ok","cancel","open","before-open","close","before-close"],setup(i,{emit:d}){const u=i,c=d,{visible:f,defaultVisible:m,width:y,top:p,alignCenter:k,maskClosable:B,escToClose:C,modalStyle:b,fullscreen:v,draggable:g,renderToBody:h}=e.toRefs(u),{onBeforeOk:S,onBeforeCancel:V}=u,{popupContainer:N,zIndex:T}=l.getGlobalConfig(u),{outerVisible:x,innerVisible:w,asyncLoading:_,handleClose:q,handleAfterLeave:z}=t({visible:f,defaultVisible:m,escToClose:C,maskClosable:B,onBeforeOk:S,onBeforeCancel:V,emits:c}),A=e.ref(),E=e.ref(),{dragStyle:j,isDraggable:$}=a({visible:w,draggable:g,fullscreen:v,alignCenter:k,top:p,triggerRef:A,modalRef:E}),D=e.computed((()=>({width:v.value?"100%":"auto"==y.value?"fit-content":o.valueToPx(y.value),...j.value,...b.value})));return(o,l)=>(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(N),disabled:!e.unref(h)},[!o.unmountOnClose||e.unref(x)?e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["yc-modal-container",{"yc-modal-simple":o.simple,"yc-modal-position-absolute":e.unref(N)||!e.unref(h)}]),style:e.normalizeStyle({zIndex:e.unref(T)})},[e.createVNode(e.Transition,{name:o.maskAnimationName},{default:e.withCtx((()=>[o.mask?e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:0,class:"yc-modal-mask",style:e.normalizeStyle(o.maskStyle)},null,4)),[[e.vShow,e.unref(w)]]):e.createCommentVNode("",!0)])),_:1},8,["name"]),e.createElementVNode("div",{class:"yc-modal-wrapper",onClick:l[6]||(l[6]=e.withModifiers((o=>e.unref(q)("mask",o)),["self"]))},[e.createVNode(e.Transition,{name:o.modalAnimationName,onBeforeEnter:l[3]||(l[3]=e=>o.$emit("before-open")),onBeforeLeave:l[4]||(l[4]=e=>o.$emit("before-close")),onAfterEnter:l[5]||(l[5]=e=>o.$emit("open")),onAfterLeave:e.unref(z)},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["yc-modal",o.modalClass,o.$attrs.class,{"yc-modal-draggable":e.unref($),"yc-modal-fullscreen":e.unref(v)}]),style:e.normalizeStyle({...D.value,...o.$attrs.style??{}}),ref_key:"modalRef",ref:E},[e.renderSlot(o.$slots,"header",{},(()=>[e.createElementVNode("div",{class:"yc-modal-header",ref_key:"headerRef",ref:A},[o.hideTitle?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["yc-modal-title","text-ellipsis",{"title-align-center":"center"==o.titleAlign}])},[e.renderSlot(o.$slots,"title",{},(()=>[e.createTextVNode(e.toDisplayString(o.title),1)]),!0)],2)),o.closable&&!o.simple?(e.openBlock(),e.createBlock(e.unref(r),{key:1,class:"yc-modal-close-button",onClick:l[0]||(l[0]=o=>e.unref(q)("closeBtn",o))})):e.createCommentVNode("",!0)],512)]),!0),e.createElementVNode("div",{class:e.normalizeClass(["yc-modal-body",o.bodyClass]),style:e.normalizeStyle(o.bodyStyle)},[e.renderSlot(o.$slots,"default",{},void 0,!0)],6),o.footer?(e.openBlock(),e.createElementBlock("div",s,[e.renderSlot(o.$slots,"footer",{},(()=>[o.hideCancel?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(n.default),e.mergeProps({key:0},o.cancelButtonProps,{onClick:l[1]||(l[1]=o=>e.unref(q)("cancelBtn",o))}),{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(o.cancelText),1)])),_:1},16)),e.createVNode(e.unref(n.default),e.mergeProps({type:"primary",loading:o.okLoading||e.unref(_)},o.okButtonProps,{onClick:l[2]||(l[2]=o=>e.unref(q)("confirmBtn",o))}),{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(o.okText),1)])),_:1},16,["loading"])]),!0)])):e.createCommentVNode("",!0)],6),[[e.vShow,e.unref(w)]])])),_:3},8,["name","onAfterLeave"])])],6)),[[e.vShow,e.unref(x)]]):e.createCommentVNode("",!0)],8,["to","disabled"]))}});module.exports=i;
