"use strict";const e=require("vue"),s=require("../../node_modules/@vueuse/core/index.js");require("../../node_modules/tinycolor2/esm/tinycolor.js"),require("../../_shared/utils/dom.js"),require("../../_shared/utils/time.js"),require("../../Empty/index.js"),require("../../_shared/icons/_Icon.vue.js");const r=require("../../_shared/utils/control.js"),i=require("./useOnBeforeClose.js");module.exports=o=>{const{maskClosable:l,escToClose:u,visible:a,defaultVisible:n,onBeforeCancel:t,onBeforeOk:c,emits:d}=o,v=e.ref(!1),m=e.ref(!1),q=r(a,n.value,(e=>{d("update:visible",e)})),f=async(e,s)=>{await i(e,m,c,t)&&("mask"!=e||l.value)&&("confirmBtn"==e&&d("ok"),d("cancel",s),q.value=!1)};return u.value&&s.onKeyStroke(["Escape"],(e=>{q.value&&f("esc",e)})),e.watch((()=>q.value),(e=>{e&&(v.value=e)}),{immediate:!0}),{asyncLoading:m,outerVisible:v,innerVisible:q,handleClose:f,handleAfterLeave:()=>{d("close"),v.value=!1}}};
