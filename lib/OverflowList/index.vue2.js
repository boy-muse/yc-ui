"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const l=require("../_shared/utils/fn.js");require("../_shared/utils/time.js");const t=require("../_shared/utils/vue-utils.js");require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const r=require("../node_modules/@vueuse/core/index.js"),o=require("../Tag/index.js"),a=e.defineComponent({name:"OverflowList",__name:"index",props:{min:{default:0},margin:{default:8},from:{default:"end"}},emits:["change"],setup(a,{emit:n}){const u=a,s=n,{min:i,margin:c,from:f}=e.toRefs(u),v=e.ref(1e4),m=e.ref([]),d=e.useSlots(),p=e.computed((()=>{var e;return t.findComponentsFromVnodes((null==(e=d.default)?void 0:e.call(d))||[],o.name)})),h=e.ref(),y=e.ref(),g=e.computed((()=>y.value?t.unrefElement(y).offsetWidth+c.value:c.value)),k=e.computed((()=>p.value.length-v.value));return r.useResizeObserver(h,l.throttle((async()=>{await l.sleep(0);let e=0,t=0;const r=h.value.offsetWidth;for(let l=0;l<m.value.length;l++){const o=t+(l>0?c.value:0)+m.value[l];if(o>r)break;t=o,e++}v.value=e>i.value?e:i.value}),180)),e.watch((()=>v.value),(()=>{s("change",k.value)})),e.watch((()=>p.value.length),(async()=>{v.value=1e5,await l.sleep(0);const e=[...document.querySelectorAll("#overflowTag")].map((e=>e.offsetWidth));m.value=e}),{immediate:!0}),(t,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-overflow-list",`yc-overflow-list-from-${e.unref(f)}`]),style:e.normalizeStyle({gap:e.unref(l.valueToPx)(e.unref(c)),padding:"start"==e.unref(f)?`0 0 0 ${e.unref(l.valueToPx)(g.value)}`:` 0 ${e.unref(l.valueToPx)(g.value)} 0 0`}),ref_key:"listRef",ref:h},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,((l,t)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:t},[t<v.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l),{key:0,id:"overflowTag"})):e.createCommentVNode("",!0)],64)))),128)),v.value<p.value.length?(e.openBlock(),e.createElementBlock("div",{key:0,class:"yc-overflow-tag",ref_key:"overflowRef",ref:y},[e.renderSlot(t.$slots,"overflow",{number:k.value},(()=>[e.createVNode(e.unref(o),null,{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(`+${k.value}`),1)])),_:1})]),!0)],512)):e.createCommentVNode("",!0)],6))}});module.exports=a;
