"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const l=require("../_shared/utils/fn.js"),a=require("../_shared/utils/is.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const r=require("../_shared/icons/IconFaceSmile.vue.js"),o=require("../_shared/icons/IconStar.vue.js"),t=require("../_shared/utils/control.js"),n=["onClick","onMouseenter"],u=["onClick","onMouseenter"],c=e.defineComponent({name:"Rate",__name:"index",props:{count:{default:5},modelValue:{default:void 0},defaultValue:{default:0},allowHalf:{type:Boolean,default:!1},allowClear:{type:Boolean},grading:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{default:"rgb(247, 186, 30)"}},emits:["update:modelValue","change","hover-change"],setup(c,{emit:s}){const i=c,d=s,{modelValue:v,defaultValue:f,readonly:m,disabled:y,count:k,allowClear:p,color:h}=e.toRefs(i),B=e.ref([]);let g=!1;const _=e.ref(0),j=t(v,f.value,(e=>{d("update:modelValue",e)})),q=e.computed((()=>{var e;return a.isObject(h.value)?(null==(e=Object.entries(h.value).find((([e])=>_.value<=+e)))?void 0:e[1])??"rgb(247, 186, 30)":h.value??"rgb(247, 186, 30)"})),C=async e=>{if(!(m.value||y.value||g)){j.value=p.value&&j.value==e?0:e,d("change",j.value),g=!0;for(let e=1;e<=k.value;e++){if(e>j.value)continue;const a=B.value[e];a.classList.add("yc-rate-character-scale"),await l.sleep(50),setTimeout((()=>{a.classList.remove("yc-rate-character-scale")}),150)}g=!1}};let b;const V=e=>{m.value||y.value||(b&&clearTimeout(b),_.value=e,d("hover-change",e))},M=()=>{m.value||y.value||(b&&clearTimeout(b),b=setTimeout((()=>{_.value=0}),100))};return(l,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-rate",{"yc-rate-disabled":e.unref(y),"yc-rate-readonly":e.unref(m)}])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(k),(a=>(e.openBlock(),e.createElementBlock("div",{key:a,class:"yc-rate-character",ref_for:!0,ref:e=>B.value[a]=e},[l.allowHalf?(e.openBlock(),e.createElementBlock("div",{key:0,class:"yc-rate-character-left",style:e.normalizeStyle({color:a-.5<=e.unref(j)&&!_.value||a-.5<=_.value?q.value:""}),onClick:e.withModifiers((e=>C(a-.5)),["stop"]),onMouseenter:e=>V(a-.5),onMouseleave:M},[e.renderSlot(l.$slots,"character",{index:a},(()=>[l.grading?(e.openBlock(),e.createBlock(e.unref(r),{key:0})):(e.openBlock(),e.createBlock(e.unref(o),{key:1}))]),!0)],44,n)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"yc-rate-character-right",style:e.normalizeStyle({color:a<=e.unref(j)&&!_.value||a<=_.value?q.value:""}),onClick:e=>C(a),onMouseenter:e=>V(a),onMouseleave:M},[e.renderSlot(l.$slots,"character",{index:a},(()=>[l.grading?(e.openBlock(),e.createBlock(e.unref(r),{key:0})):(e.openBlock(),e.createBlock(e.unref(o),{key:1}))]),!0)],44,u)])))),128))],2))}});module.exports=c;
