"use strict";const e=require("vue"),t=require("../node_modules/@vueuse/core/index.js");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const r=require("../_shared/utils/fn.js");require("../_shared/utils/time.js"),require("../Empty/index.js");const o=require("../_shared/utils/control.js");require("../_shared/icons/_Icon.vue.js");const i=require("../_shared/icons/IconDragDot.vue.js"),l=["dir","onMousedown"],u={class:"yc-resizebox-trigger-icon-wrapper"},n=e.defineComponent({name:"ResizeBox",__name:"index",props:{width:{default:void 0},height:{default:void 0},component:{default:"div"},directions:{default:()=>["right"]}},emits:["update:width","update:height","moving-start","moving","moving-end"],setup(n,{emit:s}){e.useSlots();const a=n,d=s,{width:c,height:v}=e.toRefs(a),h=o(c,0,(e=>{d("update:width",e)})),g=o(v,0,(e=>{d("update:height",e)})),m=e.reactive([]),f=e.reactive({left:0,right:0,bottom:0,top:0}),p=e.ref(),y=e.ref(null),b=e.ref(0),x=e.ref(0);let w;return t.useEventListener("mousemove",(async e=>{if(!y.value||!p.value)return;const{clientX:t,clientY:o}=e,i="left"==y.value?b.value-t:t-b.value,l="top"==y.value?x.value-o:o-x.value,u=f.left+f.right,n=f.top+f.bottom;b.value=t,x.value=o,["left","right"].includes(y.value)?(h.value+=i,h.value<=u&&(h.value=u),p.value.style.width=r.valueToPx(h.value)):(g.value+=l,g.value<=n&&(g.value=n),p.value.style.height=r.valueToPx(g.value));const{width:s,height:a}=p.value.getBoundingClientRect();h.value!=s&&(h.value=s),a!=g.value&&(g.value=a),d("moving",{width:s,height:a},e)})),t.useEventListener("mouseup",(e=>{y.value&&(y.value=null,document.body.style.cursor=w,d("moving-end",e))})),t.useResizeObserver((()=>m),(e=>{e.forEach((e=>{const t=e.target.getAttribute("dir"),{contentRect:{width:r,height:o}}=e;f[t]=["right","left"].includes(t)?r:o}))}),{box:"border-box"}),(t,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.component),{class:"yc-resizebox",ref_key:"boxRef",ref:p},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default",{},void 0,!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.directions,((r,o)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:e.normalizeClass(["yc-resizebox-trigger",`yc-resizebox-direction-${r}`,"yc-resizebox-trigger-"+(["left","right"].includes(r)?"vertical":"horizontal")]),dir:r,ref_for:!0,ref:e=>m[o]=e,onMousedown:e=>((e,t)=>{t.preventDefault(),y.value=e;const{width:r,height:o}=p.value.getBoundingClientRect(),{clientX:i,clientY:l}=t;h.value=r,g.value=o,b.value=i,x.value=l,w=getComputedStyle(document.body).cursor,document.body.style.cursor=["left","right"].includes(e)?"col-resize":"row-resize",d("moving-start",t)})(r,e)},[e.renderSlot(t.$slots,"resize-trigger",{direction:r},(()=>[e.createElementVNode("div",u,[e.renderSlot(t.$slots,"resize-trigger-icon",{direction:r},(()=>[e.createVNode(e.unref(i),{rotate:["left","right"].includes(r)?90:0},null,8,["rotate"])]),!0)])]),!0)],42,l)))),128))])),_:3},512))}});module.exports=n;
