"use strict";const e=require("vue"),l=require("../node_modules/@vueuse/core/index.js"),r=require("./ScrollbarTrack.vue.js"),o=require("./hooks/useContext.js"),t=e.defineComponent({name:"Scrollbar",inheritAttrs:!1,__name:"Scrollbar",props:{type:{default:"embed"},outerClass:{default:""},outerStyle:{default:()=>({})},scrollbar:{type:Boolean,default:!0}},emits:["scroll"],setup(t,{expose:a,emit:u}){const c=t,s=u,{type:n,scrollbar:v}=e.toRefs(c),f=e.ref(),i=e.ref(),d=e.ref(0),h=e.ref(0);l.useResizeObserver(f,(()=>{const{offsetWidth:e,offsetHeight:l}=f.value;d.value=e,h.value=l}));const{hasVerticalBar:m=e.ref(!1),hashorizontalBar:p=e.ref(!1),trackHeight:b=e.ref(0),trackWidth:k=e.ref(0),scrollWidth:y,scrollHeight:g,curLeft:T,curTop:z,movableLeft:B,movableTop:S}=function(){if(!v.value)return{hasVerticalBar:e.ref(!1),hashorizontalBar:e.ref(!1),trackHeight:e.ref(0),trackWidth:e.ref(0),contentWidth:e.ref(0),contentHeight:e.ref(0),scrollWidth:e.ref(0),scrollHeight:e.ref(0),curLeft:e.ref(0),curTop:e.ref(0),movableLeft:e.ref(0),movableTop:e.ref(0)};const r=e.ref(0),t=e.ref(0),{width:a,height:u}=l.useElementSize(i,void 0,{box:"border-box"}),c=e.ref(0),s=e.ref(0),n=e.computed((()=>{const e=i.value?getComputedStyle(i.value):{overflowY:"",overflow:""},l=e.overflowY,r=e.overflow,o=["auto","scroll"];return h.value>u.value&&(o.includes(l)||o.includes(r))})),f=e.computed((()=>{const e=i.value?getComputedStyle(i.value):{overflowX:"",overflow:""},l=e.overflowX,r=e.overflow,o=["auto","scroll"];return d.value>a.value&&(o.includes(l)||o.includes(r))})),m=e.computed((()=>{if(!n.value)return 0;const e=+(u.value*u.value/h.value).toFixed(0);return e<=20?20:e})),p=e.computed((()=>{if(!f.value)return 0;const e=+(a.value*a.value/d.value).toFixed(0);return e<=20?20:e})),b=e.computed((()=>{const e=f.value?t.value:0;return u.value-m.value-e})),k=e.computed((()=>{const e=n.value?r.value:0;return a.value-p.value-e}));return o().provide({curLeft:s,curTop:c,movableLeft:k,movableTop:b,thumbHeight:m,thumbWidth:p,scrollRef:i,isDragging:e.ref(!1)}),{hasVerticalBar:n,hashorizontalBar:f,trackWidth:r,trackHeight:t,contentHeight:h,contentWidth:d,scrollHeight:u,scrollWidth:a,movableLeft:k,movableTop:b,curTop:c,curLeft:s}}(),H=e=>{const{scrollTop:l,scrollLeft:r,scrollWidth:o,scrollHeight:t}=e.target;if(s("scroll",r,l,e),!v.value)return;const a=l/(h.value-g.value)*S.value;z.value=a<=S.value?a:S.value;const u=r/(d.value-y.value)*B.value;T.value=u<=B.value?u:B.value},L=(e,l)=>{if(e){z.value=l;const e=h.value-g.value,r=z.value/S.value*e;i.value.scrollTop=r>=e?e:r}else{T.value=l;const e=d.value-y.value,r=T.value/B.value*e;i.value.scrollLeft=r>=e?e:r}};return a({scrollTo(e){var l;null==(l=i.value)||l.scrollTo(e)},scrollLeft(e){var l;null==(l=i.value)||l.scrollTo({left:e})},scrollTop(e){var l;null==(l=i.value)||l.scrollTo({top:e})},getScrollRef:()=>i.value}),(l,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-scrollbar",l.outerClass,{"yc-scrollbar-both-track":"track"==e.unref(n)&&e.unref(m)&&e.unref(p),"yc-scrollbar-vertical-track":"track"==e.unref(n)&&e.unref(m),"yc-scrollbar-horizontal-track":"track"==e.unref(n)&&e.unref(p),"yc-scrollbar-real":!e.unref(v)}]),style:e.normalizeStyle(l.outerStyle)},[e.createElementVNode("div",{class:e.normalizeClass(["yc-scrollbar-container",l.$attrs.class]),style:e.normalizeStyle(l.$attrs.style),ref_key:"scrollRef",ref:i,onScroll:H},[e.createElementVNode("div",{class:"yc-scrollbar-content",ref_key:"contentRef",ref:f},[e.renderSlot(l.$slots,"default",{},void 0,!0)],512)],38),e.unref(m)?(e.openBlock(),e.createBlock(r,{key:0,direction:"vertical",onDrag:L,onResize:o[0]||(o[0]=e=>k.value=e)})):e.createCommentVNode("",!0),e.unref(p)?(e.openBlock(),e.createBlock(r,{key:1,direction:"horizontal",onDrag:L,onResize:o[1]||(o[1]=e=>b.value=e)})):e.createCommentVNode("",!0)],6))}});module.exports=t;
