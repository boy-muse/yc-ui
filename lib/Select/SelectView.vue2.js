"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js");const o=require("../_shared/utils/vue-utils.js"),r=require("../_shared/utils/global-config.js"),l=require("./hooks/useContext.js"),t=require("../List/hooks/useScrollReach.js"),n=require("./SelectVirtualList.vue.js"),s=require("./SelectRealList.vue.js"),c=require("../Spin/index.js"),a={class:"yc-select-dropdown"},i={key:0,class:"yc-select-dropdown-header"},u={key:4,class:"yc-select-dropdown-footer"},d=e.defineComponent({__name:"SelectView",props:{loading:{type:Boolean},scrollbar:{type:Boolean},showFooterOnEmpty:{type:Boolean},showHeaderOnEmpty:{type:Boolean},virtualListProps:{}},setup(d){const p=d,{virtualListProps:m}=e.toRefs(p),{slots:k,options:y,isEmpty:f,emits:v}=l().inject(),{renderEmpty:B}=r.getGlobalConfig(),h=e.ref(),g=e.ref(),w=e.computed((()=>{var e;return j.value?o.unrefElement(g):null==(e=h.value)?void 0:e.getScrollRef()}));t({scrollRef:w,onScroll:e=>{v("dropdown-scroll",e)},onReachBottom:e=>{v("dropdown-reach-bottom",e)}});const j=e.computed((()=>!!m.value&&(m.value.itemHeight&&(!m.value.threshold||m.value.threshold>y.value.length)))),q=e=>k[e];return(o,r)=>(e.openBlock(),e.createElementBlock("div",a,[o.loading?(e.openBlock(),e.createBlock(e.unref(c),{key:0,loading:o.loading,class:"yc-select-dropdown-loading"},e.createSlots({_:2},[o.$slots["loading-icon"]?{name:"icon",fn:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(q("loading-icon"))))])),key:"0"}:void 0]),1032,["loading"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[!e.unref(k).header||!o.showHeaderOnEmpty&&e.unref(f)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",i,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(q("header"))))])),j.value?(e.openBlock(),e.createBlock(n,{key:1,"virtual-list-props":e.unref(m),ref_key:"virtualListRef",ref:g},null,8,["virtual-list-props"])):(e.openBlock(),e.createBlock(s,{key:2,scrollbar:o.scrollbar,ref_key:"realListRef",ref:h},null,8,["scrollbar"])),e.unref(f)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(k).empty||e.unref(B)("Select")),{key:3})):e.createCommentVNode("",!0),!e.unref(k).footer||!o.showFooterOnEmpty&&e.unref(f)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",u,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(q("footer"))))]))],64))]))}});module.exports=d;
