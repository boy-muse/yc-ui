"use strict";const e=require("vue");require("../../node_modules/tinycolor2/esm/tinycolor.js"),require("../../_shared/utils/dom.js");const t=require("../../_shared/utils/is.js");require("../../_shared/utils/time.js"),require("../../Empty/index.js"),require("../../_shared/icons/_Icon.vue.js");const l=require("../../_shared/utils/control.js"),u=require("./useSelectOptions.js"),i=require("./useSelectHotkeys.js"),o="select-context";module.exports=()=>({provide:(s,r,a)=>{const{popupVisible:n,defaultPopupVisible:p,modelValue:c,defaultValue:d,inputValue:m,defaultInputValue:v,multiple:f,fieldNames:V,limit:O,allowSearch:b,showExtraOptions:y,valueKey:h,hotkeys:j,options:q,showEmpty:x}=e.toRefs(s),{formatLabel:I,fallbackOption:g,filterOption:E}=s,_=l(n,p.value,(e=>{r("update:popupVisible",e),r("popup-visible-change",e)})),k=l(c,d.value?d.value:f.value?[]:"",(e=>{r("change",e),r("update:modelValue",e)}),(e=>f.value?Array.isArray(e)?e:[e]:e)),w=l(m,v.value,(e=>{r("update:inputValue",e)})),L=e.computed((()=>Object.fromEntries(["id","label","value","disabled","tagProps","render","isFallbackOption"].map((e=>[e,V.value[e]??e]))))),S=e=>{var t;const l=null==e?void 0:e.label,u=null==(t=w.value.toLowerCase())?void 0:t.toLowerCase();return!!(null==l?void 0:l.includes(u))},F=e=>b.value?t.isFunction(E)?E(w.value,e):S(e):!(!t.isBoolean(E)||E)||(t.isFunction(E)?E(w.value,e):S(e)),{options:K,renderOptions:A,createOptions:B,selectOptions:C,collectOption:P}=u({computedValue:k,multiple:f,showExtraOptions:y,provideOptions:q,getValue:R,fallbackOption:g,formatLabel:I}),H=e.computed((()=>x.value?!b.value||t.isBoolean(E)&&!F?!K.value.length:K.value.every((e=>!F(e))):x.value)),{curIndex:N}=i({computedValue:k,computedVisible:_,hotkeys:j,limit:O,multiple:f,options:K,blur:z,emits:r});function R(e){return(null==e?void 0:e[h.value])??e}function z(){var e;null==(e=a.value)||e.blur()}return e.provide(o,{computedValue:k,computedInputValue:w,limit:O,multiple:f,curIndex:N,options:K,isEmpty:H,fieldKey:L,renderOptions:A,slots:e.useSlots(),filterOption:F,blur:z,getValue:R,emits:r,collectOption:P}),{computedVisible:_,computedValue:k,computedInputValue:w,selectOptions:C,createOptions:B,options:K}},inject:()=>e.inject(o,{computedValue:e.ref(void 0),computedInputValue:e.ref(""),multiple:e.ref(!1),limit:e.ref(0),curIndex:e.ref(-1),options:e.ref([]),renderOptions:e.ref([]),isEmpty:e.ref(!1),fieldKey:e.ref({}),slots:{},emits:()=>{},blur:()=>{},filterOption:()=>!0,getValue:()=>"",collectOption:()=>{}})});
