"use strict";const e=require("vue"),l=require("../../node_modules/nanoid/index.browser.js");require("../../node_modules/tinycolor2/esm/tinycolor.js"),require("../../_shared/utils/dom.js");const u=require("../../_shared/utils/is.js");require("../../_shared/utils/time.js"),require("../../Empty/index.js"),require("../../_shared/icons/_Icon.vue.js");module.exports=t=>{const{computedValue:i,multiple:a,provideOptions:o,showExtraOptions:n,getValue:r,fallbackOption:s,formatLabel:d}=t,c=e.reactive(new Map),v=e.computed((()=>[...c.values()])),p=e.ref([]),m=e.computed((()=>s?O.value.filter((e=>!v.value.find((l=>r(l.value)==e)))).map((e=>({...s(e)||{},isFallbackOption:!0}))):[])),b=e.computed((()=>[...o.value,...p.value,...n.value?m.value:[]].map((e=>{let t=e;return u.isObject(e)||(t={label:e,value:e}),{id:l.nanoid(),...t}})))),O=e.computed((()=>(a.value?i.value:[i.value]).map((e=>r(e))).filter((e=>!j(e))))),f=e.computed((()=>{const e=[...v.value,...m.value];return O.value.map((l=>{const u=e.find((e=>r(e.value)==l))||{};return{...u,id:`${l}`,label:u?(null==d?void 0:d(u))??(null==u?void 0:u.label):l}}))})),j=e=>u.isUndefined(e)||u.isNull(e)||u.isString(e)&&!e.length;return{options:v,createOptions:p,renderOptions:b,selectOptions:f,collectOption:(u,t)=>{if(u.isFallbackOption)return;const i=l.nanoid();e.onMounted((()=>{const e=`${r(u.value)}`;c.set(i,{...u,label:t.value,value:e?u.value:t.value})}))}}};
