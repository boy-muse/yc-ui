"use strict";const e=require("vue"),a=require("../../node_modules/@vueuse/core/index.js");require("../../node_modules/tinycolor2/esm/tinycolor.js"),require("../../_shared/utils/dom.js");const l=require("../../_shared/utils/fn.js");require("../../_shared/utils/time.js"),require("../../Empty/index.js"),require("../../_shared/icons/_Icon.vue.js");module.exports=t=>{const{trackRef:u,triggerRef:i,computedValue:v,direction:o,max:r,min:n,step:s,disabled:c,normalizeValue:m,denormalizeValue:d}=t,{x:g,y:h,isDragging:f}=a.useDraggable(i,{disabled:c,onMove(){const{minTop:e,maxTop:a,minLeft:l,maxLeft:t}=q;let u;"vertical"==o.value?(h.value=h.value>e?e:h.value,h.value=h.value<a?a:h.value,u=b(h.value)):(g.value=g.value<l?l:g.value,g.value=g.value>t?t:g.value,u=b(g.value)),u=d(u),w(u),u!=v.value&&(v.value=u)}}),p=e.computed((()=>m(r.value))),x=e.computed((()=>m(s.value))),T=e.reactive({bottom:0,left:0,top:0,right:0}),q=e.reactive({minLeft:0,maxLeft:0,minTop:0,maxTop:0}),b=e=>{const{left:a,bottom:l,width:t,height:i}=u.value.getBoundingClientRect(),v="vertical"==o.value?(l-e)/i*p.value:(e-a)/t*p.value;return Math.floor(v/x.value)*x.value},j=e=>{e=m(e);const{left:a,bottom:l,width:t,height:i}=u.value.getBoundingClientRect();return e=Math.floor(e/x.value)*x.value,"vertical"==o.value?l-e/p.value*i:e/p.value*t+a},w=e=>{e=m(e);const{width:a,height:t}=u.value.getBoundingClientRect(),i=m(v.value)/p.value*t,r=m(v.value)/p.value*a;"vertical"==o.value?(T.top=100-e,T.bottom=e,T.transform=`translate(-50%,calc(${l.valueToPx(-i)} + 50%))`):(T.left=e,T.right=100-e,T.transform=`translate(calc(${l.valueToPx(r)} - 50%),-50%)`)};return e.watch([n,r],(async()=>{await e.nextTick(),q.minTop=j(n.value),q.maxTop=j(r.value),q.minLeft=j(n.value),q.maxLeft=j(r.value),v.value>r.value?v.value=r.value:v.value<n.value&&(v.value=n.value),w(v.value)}),{immediate:!0}),e.watch((()=>v.value),(async a=>{f.value||(await e.nextTick(),w(a))})),{isDragging:f,position:T}};
