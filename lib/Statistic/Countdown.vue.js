"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js");const a=require("../_shared/utils/fn.js"),t=require("../_shared/utils/is.js"),u=require("../_shared/utils/time.js");require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const i=require("./Statistic.vue.js"),l=e.defineComponent({name:"Countdown",__name:"Countdown",props:{title:{default:""},value:{default:void 0},now:{default:void 0},format:{default:"HH:mm:ss"},start:{type:Boolean,default:!0},easeing:{default:"quadOut"},valueStyle:{default:()=>({})}},emits:["finish"],setup(l,{emit:n}){const r=l,s=n,{value:o,now:v,format:d,start:f}=e.toRefs(r),m=e.ref(0),c=e.ref(0),h=e.ref(m.value),p=e.ref(!1),q=()=>{if(h.value-1e3<=0)return p.value=!1,s("finish");h.value-=1e3};return e.watch((()=>f.value),(async e=>{p.value||(m.value=t.isUndefined(o.value)?Date.now()+3e5:o.value,c.value=t.isUndefined(v.value)?Date.now():v.value,h.value=m.value-c.value),e&&(await a.sleep(0),p.value=!0)}),{immediate:!0}),(a,t)=>(e.openBlock(),e.createBlock(i,{title:a.title,value:h.value-1e3,"value-from":h.value,start:e.unref(f),animation:p.value,format:e.unref(d),"value-style":a.valueStyle,easeing:a.easeing,"animation-duration":1e3,"is-countdown":"",onFinish:q},{value:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(u.formatSeconds)(m.value-c.value,e.unref(d))),1)])),_:1},8,["title","value","value-from","start","animation","format","value-style","easeing"]))}});module.exports=l;
