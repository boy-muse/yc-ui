"use strict";const e=require("vue"),t=require("../../node_modules/nanoid/index.browser.js");require("../../node_modules/tinycolor2/esm/tinycolor.js"),require("../../_shared/utils/dom.js");const r=require("../../_shared/utils/is.js");require("../../_shared/utils/time.js"),require("../../Empty/index.js"),require("../../_shared/icons/_Icon.vue.js");const u=require("../../_shared/utils/control.js"),a="card-context";module.exports=()=>({provide:(t,r)=>{const{status:s,current:l,defaultCurrent:n,lineLess:o,labelPlacement:i,direction:c,small:d,type:v,changeable:p}=e.toRefs(t),m=u(l,n.value,(e=>{r("update:current",e)})),f=e.computed((()=>["default","dot"].includes(v.value)?c.value:"horizontal")),h=e.computed((()=>"default"==v.value&&"horizontal"==f.value?i.value:"dot"==v.value?"vertical"==f.value?"horizontal":"vertical":"horizontal")),j=e.reactive(new Map),q=e.ref([]);return e.provide(a,{stepMap:j,computedCurrent:m,lineLess:o,direction:f,status:s,statusArr:q,small:d,type:v,changeable:p,labelPlacement:h,emits:r}),{direction:f,labelPlacement:h,type:v}},inject:u=>{const{status:s}=e.toRefs(u),l=e.inject(a,{stepMap:e.reactive(new Map),computedCurrent:e.ref(0),lineLess:e.ref(!1),direction:e.ref("horizontal"),status:e.ref("process"),statusArr:e.ref([]),small:e.ref(!1),type:e.ref("default"),changeable:e.ref(!1),labelPlacement:e.ref("horizontal"),emits:()=>{}}),{curStep:n,status:o,nextStatus:i}=(()=>{const{stepMap:u,computedCurrent:a,statusArr:n,status:o}=l,i=t.nanoid();u.set(i,i);const c=e.computed((()=>[...u.values()].findIndex((e=>e==i))+1)),d=e.computed((()=>r.isUndefined(s.value)?c.value<a.value?"finish":c.value==a.value?o.value??"process":"wait":s.value)),v=e.computed((()=>{var e;return null==(e=n.value[c.value])?void 0:e.value}));return n.value[c.value-1]=d,e.onBeforeUnmount((()=>{u.delete(i),n.value.splice(c.value-1,1)})),{curStep:c,status:d,nextStatus:v}})();return{...l,curStep:n,status:o,nextStatus:i}}});
