"use strict";const e=require("vue"),r=require("./hooks/useTextareaHeight.js"),t=require("../Input/hooks/useLimitedInput.js"),o=require("../_shared/components/IconButton.vue.js"),a=require("../_shared/components/PreventFocus.vue.js");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js"),require("../_shared/components/ExpandTransition.vue2.js");const n=["value","disabled","readonly","placeholder"],l=e.defineComponent({name:"Textarea",__name:"index",props:{modelValue:{default:void 0},defaultValue:{default:""},placeholder:{default:""},disabled:{type:Boolean,default:!1},error:{type:[Boolean,Object],default:void 0},maxLength:{default:void 0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function,default:e=>e.length},wordSlice:{type:Function,default:(e,r)=>e.slice(0,r)},enterPrevent:{type:Boolean,default:!1},showMirror:{type:Boolean,default:!1}},emits:["update:modelValue","input","change","clear","focus","blur","keydown"],setup(l,{expose:u,emit:s}){const i=l,c=s,{autoSize:d}=e.toRefs(i),p=e.ref(),f=e.ref(),{error:m,computedValue:y,showWordLimit:h,showClearBtn:v,curLength:k,maxLength:x,handleInput:B,handleComposition:b}=t({props:i,emits:c,inputRef:p}),{style:g}=r(f,d.value),w=async(e,r)=>{switch(e){case"input":B(r);break;case"change":c("change",y.value,r);break;case"focus":case"blur":c(e,r);break;case"clear":y.value="",c("clear",r)}};return u({getInputRef:()=>p.value,getMirrorRef:()=>f.value,focus(){var e;null==(e=p.value)||e.focus()},blur(){var e;null==(e=p.value)||e.blur()}}),(r,t)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["yc-textarea-wrapper",{"yc-textarea-disabled":r.disabled,"yc-textarea-error":e.unref(m),"yc-textarea-auto-size":e.unref(d)}])},[e.unref(d)||r.showMirror?(e.openBlock(),e.createElementBlock("div",{key:0,class:"yc-textarea-mirror",ref_key:"mirrorRef",ref:f},e.toDisplayString(e.unref(y)),513)):e.createCommentVNode("",!0),e.createElementVNode("textarea",{value:e.unref(y),disabled:r.disabled,readonly:r.readonly,placeholder:r.placeholder,style:e.normalizeStyle(e.unref(g)),class:"yc-textarea",ref_key:"inputRef",ref:p,onCompositionstart:t[0]||(t[0]=(...r)=>e.unref(b)&&e.unref(b)(...r)),onCompositionupdate:t[1]||(t[1]=(...r)=>e.unref(b)&&e.unref(b)(...r)),onCompositionend:t[2]||(t[2]=(...r)=>e.unref(b)&&e.unref(b)(...r)),onKeydown:t[3]||(t[3]=e=>{"Enter"==e.key&&r.enterPrevent&&e.preventDefault(),r.$emit("keydown",e)}),onInput:t[4]||(t[4]=e=>w("input",e)),onChange:t[5]||(t[5]=e=>w("change",e)),onFocus:t[6]||(t[6]=e=>w("focus",e)),onBlur:t[7]||(t[7]=e=>w("blur",e))},null,44,n),e.unref(h)?(e.openBlock(),e.createBlock(e.unref(a),{key:1,tag:"span",class:"yc-textarea-word-limit"},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(k))+" / "+e.toDisplayString(e.unref(x)),1)])),_:1})):e.createCommentVNode("",!0),e.unref(v)?(e.openBlock(),e.createBlock(e.unref(o),{key:2,class:"yc-textarea-clear-button",onClick:t[8]||(t[8]=e=>w("clear",e))})):e.createCommentVNode("",!0)],2))}});module.exports=l;
