"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js");const l=require("../_shared/utils/global-config.js");require("../_shared/icons/_Icon.vue.js");const t=require("../_shared/icons/IconClose.vue.js"),a=require("../_shared/icons/IconDelete.vue2.js"),r=require("../_shared/icons/IconSearch.vue2.js"),n=require("./hooks/useContext.js"),o=require("../Checkbox/index.js"),u=require("../Scrollbar/index.js"),c=require("../Input/index.js"),s=require("../_shared/components/IconButton.vue.js");require("../_shared/components/ExpandTransition.vue.js");const i={class:"yc-transfer-view"},v={class:"yc-transfer-view-header"},d={class:"yc-transfer-view-header-title"},m={class:"yc-transfer-view-header-count"},f={key:0,class:"yc-transfer-view-search"},p={class:"yc-transfer-view-body"},k={key:1,role:"list",class:"yc-transfer-list"},h=["onClick"],y={class:"yc-transfer-list-item-content text-ellipsis"},g=e.defineComponent({__name:"TransferPanel",props:{type:{}},setup(g){const B=g,{type:C}=e.toRefs(B),{renderEmpty:V}=l.getGlobalConfig(),{computedValue:x,computedSelected:N,targetChecked:_,sourceChecked:b,sourceOptions:w,targetOptions:E,disabled:S,oneWay:j,showSearch:q,showSelectAll:D,simple:I,sourceInputSearchProps:T,targetInputSearchProps:F,slots:P,title:z,emits:L}=n().inject(),O=e.ref(""),A=e.computed((()=>("source"==C.value?w.value:E.value).filter((e=>{var l;return null==(l=e.label)?void 0:l.toLowerCase().includes(O.value.toLowerCase())})))),U=e.computed((()=>"source"==C.value?b.value:_.value)),G=e.computed((()=>"source"==C.value?T.value:F.value)),K=e.computed((()=>"source"==C.value?z.value[0]:z.value[1])),R=e.computed({get:()=>!!U.value.length&&U.value.length==A.value.length,set(e){if(e)N.value=[...new Set([...N.value,...A.value.map((e=>e.value))])];else{const e=Object.fromEntries(A.value.map((e=>[e.value,e])));N.value=N.value.filter((l=>!e[l]))}}}),W=e.computed((()=>!!U.value.length&&U.value.length<=A.value.length)),$=()=>{!S.value&&x.value.length&&(x.value=[])},H=()=>{var e;return null==(e=P["source"==C.value?"source-title":"target-title"])?void 0:e.call(P,{countTotal:"source"==C.value?w.value.length:E.value.length,countSelected:"source"==C.value?b.value.length:_.value.length,searchValue:O.value,checked:R.value,indeterminate:W.value,onSelectAllChange:e=>{R.value=e},onClear:$})},J=()=>{var e;return null==(e=P[C.value])?void 0:e.call(P,{selectedKeys:U.value,data:A.value,onSelect:e=>{N.value=e}})},M=e=>()=>{var l;return null==(l=P.item)?void 0:l.call(P,e)};return(l,n)=>(e.openBlock(),e.createElementBlock("div",i,[e.createElementVNode("div",v,[e.unref(P)[`${e.unref(C)}-title`]?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(H),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("span",d,[!e.unref(D)||e.unref(I)||e.unref(j)&&"target"==e.unref(C)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(K.value),1)],64)):(e.openBlock(),e.createBlock(e.unref(o.default),{key:0,modelValue:R.value,"onUpdate:modelValue":n[0]||(n[0]=e=>R.value=e),indeterminate:W.value,disabled:!A.value.length||e.unref(S)},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(K.value),1)])),_:1},8,["modelValue","indeterminate","disabled"]))]),e.createElementVNode("span",m,[e.unref(I)||e.unref(j)&&"target"==e.unref(C)?"target"!=e.unref(C)||e.unref(I)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(s),{key:1,size:14,onClick:$},{default:e.withCtx((()=>[e.createVNode(e.unref(a))])),_:1})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(U.value.length)+" / "+e.toDisplayString(A.value.length),1)],64))])],64))]),e.unref(q)?(e.openBlock(),e.createElementBlock("div",f,[e.createVNode(e.unref(c),e.mergeProps({modelValue:O.value,"onUpdate:modelValue":n[1]||(n[1]=e=>O.value=e)},G.value,{onInput:n[2]||(n[2]=l=>e.unref(L)("search",l,e.unref(C)))}),{suffix:e.withCtx((()=>[e.createVNode(e.unref(r))])),_:1},16,["modelValue"])])):e.createCommentVNode("",!0),e.createElementVNode("div",p,[A.value.length?(e.openBlock(),e.createBlock(e.unref(u),{key:0},{default:e.withCtx((()=>[e.unref(P)[e.unref(C)]?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(J),{key:0})):(e.openBlock(),e.createElementBlock("div",k,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,(l=>(e.openBlock(),e.createElementBlock("div",{key:l.value,role:"listitem",class:e.normalizeClass(["yc-transfer-list-item",{"yc-transfer-list-item-disabled":l.disabled||e.unref(S)}]),onClick:e=>(e=>{const{value:l}=e;S.value||e.disabled||(j.value&&"source"!=C.value||I.value)&&(x.value="source"==C.value?[...x.value,l]:x.value.filter((e=>e!=l)))})(l)},[e.unref(j)&&(!e.unref(j)||"source"!=e.unref(C))||e.unref(I)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("span",y,[e.unref(P).item?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(M(l)),{key:0})):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(e.unref(P).item?"":l.label),1)]),"target"!=e.unref(C)||e.unref(I)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(s),{key:0,"hover-size":20},{default:e.withCtx((()=>[e.createVNode(e.unref(t))])),_:1}))],64)):(e.openBlock(),e.createBlock(e.unref(o.default),{key:0,"model-value":U.value.includes(l.value),disabled:l.disabled||e.unref(S),onChange:e=>((e,l)=>{N.value=e?[...N.value,l]:N.value.filter((e=>e!=l)),L("select",N.value)})(e,l.value)},{default:e.withCtx((()=>[e.unref(P).item?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(M(l)),{key:0})):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(e.unref(P).item?"":l.label),1)])),_:2},1032,["model-value","disabled","onChange"]))],10,h)))),128))]))])),_:1})):e.createCommentVNode("",!0),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(V)("Transfer"))))])]))}});module.exports=g;
