"use strict";const e=require("vue");require("../node_modules/tinycolor2/esm/tinycolor.js"),require("../_shared/utils/dom.js"),require("../_shared/utils/time.js");const o=require("../_shared/utils/vue-utils.js"),t=require("../_shared/utils/global-config.js"),n=require("./hooks/useTriggerVisible.js"),r=require("./hooks/useTriggerPosition.js");require("../_shared/icons/_Icon.vue.js"),require("../_shared/components/IconButton.vue2.js");const l=require("../_shared/components/PreventFocus.vue.js");require("../_shared/components/ExpandTransition.vue2.js");const a=e.defineComponent({name:"Trigger",inheritAttrs:!1,__name:"index",props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{default:"hover"},position:{default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{default:0},popupTranslate:{default:()=>[0,0]},showArrow:{type:Boolean,default:!1},popuphoverStay:{type:Boolean},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{default:""},contentStyle:{default:()=>({})},arrowClass:{default:""},arrowStyle:{default:()=>({})},animationName:{default:"fade"},duration:{default:400},mouseEnterDelay:{default:100},mouseLeaveDelay:{default:100},focusDelay:{default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},popupContainer:{default:void 0},renderToBody:{type:Boolean,default:!0},autoFitPosition:{type:Boolean,default:!0},updateAtScroll:{type:Boolean,default:void 0},preventFocus:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:void 0},scrollToCloseDistance:{default:1},needTransformOrigin:{type:Boolean,default:!1},autoSetPosition:{type:Boolean,default:!1},onTriggerMouseenter:{},onTriggerMouseleave:{},onTriggerMouseclick:{},onTriggerFocus:{},onTriggerBlur:{},onClickOutSide:{}},emits:["update:popupVisible","popup-visible-change","show","hide"],setup(a,{expose:u,emit:s}){const i=a,d=s,{popupContainer:p}=t.getGlobalConfig(i),f=e.ref(),c=e.ref(),m=e.ref(),y=e.useSlots(),g=e.computed((()=>{var e;return o.findFirstLegitChild((null==(e=y.default)?void 0:e.call(y))||[])})),{computedVisible:v,mouseX:B,mouseY:h,handleClickEvent:C,handleMouseenter:k,handleMouseleave:T,handleFocus:w,handleBlur:_}=n({props:i,emits:d,popupRef:f,triggerRef:c}),{position:b,popupStyle:M,contentStyle:S,arrowStyle:q}=r({props:i,computedVisible:v,popupRef:f,triggerRef:c,arrowRef:m,mouseX:B,mouseY:h});return u({hide(){v.value=!1},show(){v.value=!0},updatePosition(e,o){B.value=e,h.value=o}}),(o,t)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(g.value),{ref_key:"triggerRef",ref:c,onClick:t[0]||(t[0]=o=>e.unref(C)(o,"click")),onContextmenu:t[1]||(t[1]=e.withModifiers((o=>e.unref(C)(o,"contextMenu")),["prevent"])),onMouseenter:e.unref(k),onMouseleave:e.unref(T),onFocus:e.unref(w),onBlur:e.unref(_)},null,40,["onMouseenter","onMouseleave","onFocus","onBlur"])),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(p),disabled:!o.renderToBody},[e.createVNode(e.Transition,{name:o.animationName,duration:o.duration,onAfterLeave:t[2]||(t[2]=e=>o.$emit("hide")),onAfterEnter:t[3]||(t[3]=e=>o.$emit("show"))},{default:e.withCtx((()=>[!o.unmountOnClose||e.unref(v)&&!o.disabled?e.withDirectives((e.openBlock(),e.createBlock(e.unref(l),{key:0,"prevent-focus":o.preventFocus,class:e.normalizeClass(["yc-trigger",`yc-trigger-position-${e.unref(b)}`,{"yc-trigger-transform-origin":o.needTransformOrigin},o.$attrs.class]),style:e.normalizeStyle({...e.unref(M),...o.$attrs.style||{}}),ref_key:"popupRef",ref:f,onMouseenter:e.unref(k),onMouseleave:e.unref(T)},{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["yc-trigger-content",o.contentClass]),style:e.normalizeStyle(e.unref(S))},[e.renderSlot(o.$slots,"content",{},void 0,!0)],6),o.showArrow?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["yc-trigger-arrow",o.arrowClass]),style:e.normalizeStyle(e.unref(q)),ref_key:"arrowRef",ref:m},null,6)):e.createCommentVNode("",!0)])),_:3},8,["prevent-focus","class","style","onMouseenter","onMouseleave"])),[[e.vShow,e.unref(v)&&!o.disabled]]):e.createCommentVNode("",!0)])),_:3},8,["name","duration"])],8,["to","disabled"]))],64))}});module.exports=a;
