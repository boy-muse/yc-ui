"use strict";const e=require("vue"),t=require("../node_modules/@vueuse/core/index.js");require("../node_modules/tinycolor2/esm/tinycolor.js");const o=require("../_shared/utils/dom.js"),l=require("../_shared/utils/fn.js");require("../_shared/utils/time.js"),require("../Empty/index.js"),require("../_shared/icons/_Icon.vue.js");const a=require("../_shared/icons/IconCopy.vue2.js"),n=require("../_shared/icons/IconEdit.vue2.js"),r=require("../_shared/icons/IconInfo.vue.js"),u=require("../_shared/utils/control.js"),d=require("../Input/index.js"),i=require("../Tooltip/index.js"),s=e.defineComponent({name:"TypographyBase",__name:"TypographyBase",props:{tag:{default:"span"},type:{default:void 0},bold:{type:Boolean,default:!1},disabled:{type:Boolean},mark:{type:Boolean,default:!1},underline:{type:Boolean,default:!1},delete:{type:Boolean,default:!1},code:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean,default:!1},editText:{default:""},copyable:{type:Boolean,default:!1},copyText:{default:""},copyDelay:{default:3e3},ellipsis:{type:[Boolean,Object],default:!0},editTooltiProps:{default:()=>({})},copyTooltiProps:{default:()=>({})}},emits:["update:editing","update:editText","edit-start","change","copy","edit-end","ellipsis","expand"],setup(s,{emit:p}){const c=s,y=p,{editing:f,defaultEditing:v,editText:m,copyText:g,copyable:B,copyDelay:h,code:k,mark:x,delete:_,underline:T,ellipsis:C,bold:b}=e.toRefs(c),{isSupported:j,copy:q}=t.useClipboard(),V=e.ref(!1),E=e.ref(),N=e.ref(),w=u(f,v.value,(e=>{y("update:editing",e)})),D=u(m,"",(e=>{y("update:editText",e),y("change",e)}));e.ref({});const I=e.computed((()=>{const e=[x.value,k.value,_.value,T.value,b.value];return["mark","code","del","u","b"].filter(((t,o)=>e[o]))})),P=e.defineComponent({props:{tags:{type:Array,default:()=>[]}},setup:(t,{slots:o})=>()=>{var l;const{tags:a}=e.toRefs(t),n=(t,o)=>o>=a.value.length?t:e.h(a.value[o],null,n(t,o+1));return n(null==(l=o.default)?void 0:l.call(o),0)}}),R=async()=>{var e;w.value=!0,D.value=D.value?D.value:o.getDomText(E),y("edit-start"),await l.sleep(0),null==(e=N.value)||e.focus()},S=()=>{w.value=!1,y("edit-end")},$=async()=>{if(!B.value||!j.value||V.value)return;const e=g.value||o.getDomText(E);q(e),y("copy",e),V.value=!0,await l.sleep(h.value),V.value=!1};return e.onMounted((()=>{})),(t,o)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.tag),{class:e.normalizeClass(["yc-typography",{[`yc-typography-${t.type}`]:t.type,"yc-typography-bold":e.unref(b),"yc-typography-disabled":t.disabled,"yc-typography-underline":e.unref(T),"yc-typography-delete":e.unref(_)}]),ref_key:"contentRef",ref:E},{default:e.withCtx((()=>[e.unref(w)?(e.openBlock(),e.createBlock(e.unref(d),{key:0,modelValue:e.unref(D),"onUpdate:modelValue":o[0]||(o[0]=t=>e.isRef(D)?D.value=t:null),ref_key:"inputRef",ref:N,onBlur:S},null,8,["modelValue"])):(e.openBlock(),e.createBlock(e.unref(P),{key:1,tags:I.value},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default",{},void 0,!0)])),_:3},8,["tags"])),t.editable&&!e.unref(w)?(e.openBlock(),e.createElementBlock("span",{key:2,class:"yc-typography-operation-edit",onClick:R},[e.createVNode(e.unref(i),e.mergeProps({content:"编辑",position:"top"},t.editTooltiProps),{default:e.withCtx((()=>[e.createElementVNode("span",null,[e.createVNode(e.unref(n))])])),_:1},16)])):e.createCommentVNode("",!0),e.unref(B)?(e.openBlock(),e.createElementBlock("span",{key:3,class:"yc-typography-operation-copy",onClick:$},[e.createVNode(e.unref(i),e.mergeProps({position:"top"},t.copyTooltiProps),{content:e.withCtx((()=>[e.renderSlot(t.$slots,"copy-tooltip",{copied:V.value},(()=>[e.createTextVNode(e.toDisplayString(""+(V.value?"已复制":"复制")),1)]),!0)])),default:e.withCtx((()=>[e.createElementVNode("span",null,[e.renderSlot(t.$slots,"copy-icon",{copied:V.value},(()=>[V.value?(e.openBlock(),e.createBlock(e.unref(r),{key:0,color:"rgb(0, 180, 42)"})):(e.openBlock(),e.createBlock(e.unref(a),{key:1}))]),!0)])])),_:3},16)])):e.createCommentVNode("",!0)])),_:3},8,["class"]))}});module.exports=s;
