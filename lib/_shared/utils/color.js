"use strict";var o=Object.defineProperty,t=(t,r,s)=>(((t,r,s)=>{r in t?o(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s})(t,"symbol"!=typeof r?r+"":r,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("../../node_modules/tinycolor2/esm/tinycolor.js");exports.GradientColorCalculator=class{constructor(){t(this,"colorStops"),this.colorStops=[{pos:0,color:"#f00"},{pos:.17,color:"#ff0"},{pos:.33,color:"#0f0"},{pos:.5,color:"#0ff"},{pos:.67,color:"#00f"},{pos:.83,color:"#f0f"},{pos:1,color:"#f00"}]}getPositionForColor(o,t){const s=r(o);let e=1/0,l=0;for(let i=0;i<=100;i++){const o=i/100,c=r(this.getColorAtPosition(o*t,t)),p=this.calculateColorDistance(s,c);p<e&&(e=p,l=o)}return l*t}calculateColorDistance(o,t){const r=o.toRgb(),s=t.toRgb();return Math.sqrt(Math.pow(r.r-s.r,2)+Math.pow(r.g-s.g,2)+Math.pow(r.b-s.b,2))}getPrecisePositionForColor(o,t,s=.001){const e=r(o);let l=0,i=1,c=.5,p=1/0;for(;i-l>s;){const o=l+(i-l)/3,s=i-(i-l)/3,n=r(this.getColorAtPosition(o*t,t)),a=r(this.getColorAtPosition(s*t,t)),h=this.calculateColorDistance(e,n),S=this.calculateColorDistance(e,a);h<S?(i=s,h<p&&(p=h,c=o)):(l=o,S<p&&(p=S,c=s))}return c*t}getColorAtPosition(o,t){const s=this.clamp(o/t,0,1),{startStop:e,endStop:l}=this.findStops(s),i=l.pos-e.pos,c=i>0?(s-e.pos)/i:0,p=r(e.color),n=r(l.color);return r.mix(p,n,100*c).toHexString()}findStops(o){for(let t=0;t<this.colorStops.length-1;t++)if(o>=this.colorStops[t].pos&&o<=this.colorStops[t+1].pos)return{startStop:this.colorStops[t],endStop:this.colorStops[t+1]};return{startStop:this.colorStops[0],endStop:this.colorStops[this.colorStops.length-1]}}clamp(o,t,r){return Math.min(Math.max(o,t),r)}updateColorStops(o){if(o.length<2)throw new Error("至少需要两个颜色停止点");if(0!==o[0].pos||1!==o[o.length-1].pos)throw new Error("第一个停止点位置必须为0，最后一个必须为1");this.colorStops=o.sort(((o,t)=>o.pos-t.pos))}},exports.parseColor=o=>r(o);
