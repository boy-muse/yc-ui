"use strict";require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.js");const e=require("../Trigger/constants.js"),l=require("../_hooks/useSeletValue.js"),o=require("../_utils/fn.js"),t=require("../Input/index.js"),a=require("../Trigger/index.vue.js"),r=require("../Scrollbar/Scrollbar.vue.js"),n=require("../Spin/index.vue.js"),i=require("../Empty/index.vue.js"),u=require("./Option.vue.js"),s=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),d=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js"),c=require("../../../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js"),p=require("../../../node_modules/@vue/shared/dist/shared.esm-bundler.js"),m={class:"yc-select-suffix-icon"},f={key:0,class:"yc-select-search-icon"},y={class:"yc-select-dropdown"},v={key:0,class:"yc-select-dropdown-header"},h={class:"yc-select-dropdown-list"},b={key:1,class:"yc-select-dropdown-footer"},V=s.defineComponent({name:"Select",__name:"Select",props:{multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Array],default:""},inputValue:{default:void 0},defaultInputValue:{default:""},size:{default:"medium"},placeholder:{default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:!0},allowCreate:{type:Boolean},popupContainer:{default:"body"},defaultActivefirstOption:{type:Boolean,default:!1},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},unmountonClose:{type:Boolean},filterOption:{type:Function,default:(e,l)=>{var o;return null==(o=null==l?void 0:l.label)?void 0:o.includes(e)}},options:{default:()=>[]},triggerProps:{default:()=>({contentStyle:{}})},formatLabel:{type:Function,default:e=>e.map((e=>e.value)).join("、")},searchDelay:{default:500},limit:{default:0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1}},emits:["change","clear","search","input-value-change","update:modelValue","update:inputValue","update:popupVisible","popupVisibleChange","exceed-limit"],setup(V,{emit:g}){const B=V,k=g,{modelValue:w,defaultValue:C,inputValue:S,defaultInputValue:x,allowClear:N,disabled:_,loading:E,defaultPopupVisible:j,popupVisible:q,searchDelay:$,options:O,showFooterOnEmpty:P,showHeaderOnEmpty:I,limit:F,multiple:R}=d.toRefs(B),{filterOption:z,formatLabel:L}=B;s.provide("filterOption",z),s.provide("limit",F),s.provide("multiple",R),s.provide("emits",k);const A=d.ref("bl"),D=d.ref(),{computedLabel:M,computedVisible:T,computedInputValue:H,computedValue:U,isEmpty:G}=l({popupVisible:q,defaultPopupVisible:j,modelValue:w,defaultValue:C,defaultInputValue:x,inputValue:S,formatLabel:L,emits:k}),Y=s.computed((()=>N.value&&!_.value&&!E.value&&String(U.value).length)),J=e=>!!e.classList.contains("yc-select-clear-icon")||"BODY"!=e.tagName&&J(e.parentElement),K=async()=>{var e,l;T.value=!T.value,T.value?(await o.sleep(0),null==(e=D.value)||e.focus()):null==(l=D.value)||l.blur()},Q=()=>{U.value="",k("clear")},W=async e=>{await o.sleep($.value),k("search",e)};return(l,o)=>{const V=s.resolveComponent("yc-icon"),g=s.resolveComponent("yc-icon-button");return s.openBlock(),s.createBlock(a,s.mergeProps({"popup-visible":d.unref(T),"onUpdate:popupVisible":o[2]||(o[2]=e=>d.isRef(T)?T.value=e:null),trigger:"click",position:"bl","animation-name":"slide-dynamic-origin","popup-offset":4,"unmount-on-close":l.unmountonClose,"popup-container":l.popupContainer,disabled:d.unref(_),"auto-fit-popup-width":"","click-out-side-ingore-fn":J},l.triggerProps,{"content-style":{transformOrigin:d.unref(e.TRANSFORM_ORIGIN_MAP)[A.value],...l.triggerProps.contentStyle},onPositionChange:o[3]||(o[3]=e=>A.value=e),onPopupVisibleChange:o[4]||(o[4]=e=>l.$emit("popupVisibleChange",e))}),{content:s.withCtx((()=>[s.createVNode(n,{loading:d.unref(E),class:"yc-select-dropdown-loading"},{default:s.withCtx((()=>[s.createElementVNode("div",y,[!l.$slots.header||!d.unref(I)&&d.unref(G)?s.createCommentVNode("",!0):(s.openBlock(),s.createElementBlock("div",v,[s.renderSlot(l.$slots,"header",{},void 0,!0)])),s.createVNode(r,{style:{"max-height":"200px"}},{default:s.withCtx((()=>[s.createElementVNode("div",h,[s.renderSlot(l.$slots,"default",{},void 0,!0),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(d.unref(O),(e=>(s.openBlock(),s.createBlock(u,{key:e.value,value:e.value,label:e.label,disabled:e.disabled},null,8,["value","label","disabled"])))),128)),d.unref(G)?s.renderSlot(l.$slots,"empty",{key:0},(()=>[s.createVNode(i,{description:"暂无数据"})]),!0):s.createCommentVNode("",!0)])])),_:3}),!l.$slots.footer||!d.unref(P)&&d.unref(G)?s.createCommentVNode("",!0):(s.openBlock(),s.createElementBlock("div",b,[s.renderSlot(l.$slots,"footer",{},void 0,!0)]))])])),_:3},8,["loading"])])),default:s.withCtx((()=>[s.renderSlot(l.$slots,"trigger",{},(()=>[s.createElementVNode("div",{class:p.normalizeClass(["yc-select-wrapper",l.allowSearch?"yc-select-allow-search":"",Y.value?"yc-select-allow-clear":""]),onClick:K},[s.createVNode(d.unref(t.default),{modelValue:d.unref(H),"onUpdate:modelValue":o[0]||(o[0]=e=>d.isRef(H)?H.value=e:null),mode:"select","show-input":d.unref(T),"label-value":d.unref(M),placeholder:l.placeholder,"input-placeholder":d.unref(M),readonly:!l.allowSearch||d.unref(E),disabled:d.unref(_),size:l.size,error:l.error,ref_key:"inputRef",ref:D,class:"yc-select",onBlur:o[1]||(o[1]=e=>H.value=""),onInput:W},s.createSlots({suffix:s.withCtx((()=>[d.unref(E)?(s.openBlock(),s.createBlock(n,{key:0,size:12,style:{color:"inherit"},class:"yc-select-loading-icon"},s.createSlots({_:2},[l.$slots["loading-icon"]?{name:"icon",fn:s.withCtx((()=>[s.renderSlot(l.$slots,"loading-icon",{},void 0,!0)])),key:"0"}:void 0]),1024)):(s.openBlock(),s.createElementBlock(s.Fragment,{key:1},[s.createElementVNode("div",m,[s.renderSlot(l.$slots,"arrow-icon",{},(()=>[s.createVNode(V,{name:"arrow-right"})]),!0)]),l.allowSearch?(s.openBlock(),s.createElementBlock("div",f,[s.renderSlot(l.$slots,"search-icon",{},(()=>[s.createVNode(V,{name:"search"})]),!0)])):s.createCommentVNode("",!0),Y.value?(s.openBlock(),s.createBlock(g,{key:1,name:"close",style:{color:"inherit"},class:"yc-select-clear-icon",onClick:c.withModifiers(Q,["stop"])})):s.createCommentVNode("",!0)],64))])),_:2},[l.$slots.prefix?{name:"prefix",fn:s.withCtx((()=>[s.renderSlot(l.$slots,"prefix",{},void 0,!0)])),key:"0"}:void 0]),1032,["modelValue","show-input","label-value","placeholder","input-placeholder","readonly","disabled","size","error"])],2)]),!0)])),_:3},16,["popup-visible","unmount-on-close","popup-container","disabled","content-style"])}}});module.exports=V;
