"use strict";require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.js");const e=require("../_hooks/useControlValue.js"),l=require("../_utils/is.js"),t=require("../../../node_modules/@vueuse/core/index.js"),a=require("../../../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js"),o=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),r=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js"),u=require("../../../node_modules/@vue/shared/dist/shared.esm-bundler.js"),n=["disabled","readonly","maxlength","placeholder"],i={key:1,class:"yc-input-word-limit"},d=o.defineComponent({name:"Textarea",__name:"index",props:{modelValue:{default:void 0},defaultValue:{default:""},placeholder:{default:""},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{default:void 0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1}},emits:["update:modelValue","input","change","clear","focus","blur"],setup(d,{emit:s}){const c=d,m=s,{modelValue:v,defaultValue:p,maxLength:f,showWordLimit:h,allowClear:y,disabled:x,readonly:g,autoSize:b}=r.toRefs(c),B=e(v,p.value,(e=>{m("update:modelValue",e)})),k=o.computed((()=>l.isNumber(f.value)&&h.value)),V=o.computed((()=>y.value&&!x.value&&!g.value&&B.value.length)),C=r.ref(),{height:_}=t.useElementSize(C,void 0,{box:"border-box"}),w=o.computed((()=>{const e=e=>14*e*1.5715+8,l=b.value;if(!l)return{minHeight:"",maxHeight:""};let t=(null==l?void 0:l.minRows)??1;t=t<=1?1:t;const a=e(t);if(null==l?void 0:l.maxRows){let o=(null==l?void 0:l.maxRows)??1;o=o<t?t:o;const r=e(o);return{minHeight:a+"px",height:(_.value>r?r:_.value)+"px"}}return{minHeight:a+"px",height:(_.value<a?a:_.value)+"px"}})),j=(e,l)=>{if(["input","change"].includes(e)){const t=l.target,{value:a}=t;if(m(e,a,l),B.value==a)return;t.value=B.value}else B.value="",m("clear",l)};return(e,l)=>{const t=o.resolveComponent("yc-icon-button");return o.openBlock(),o.createElementBlock("div",{class:u.normalizeClass({"yc-textarea-wrapper":!0,"yc-textarea-disabled":r.unref(x),"yc-textarea-error":e.error,"yc-textarea-hoverable":!r.unref(x),"yc-textarea-auto-size":r.unref(b)})},[r.unref(b)?(o.openBlock(),o.createElementBlock("div",{key:0,class:"yc-textarea-mirror",ref_key:"mirrorRef",ref:C},u.toDisplayString(r.unref(B)),513)):o.createCommentVNode("",!0),o.withDirectives(o.createElementVNode("textarea",{"onUpdate:modelValue":l[0]||(l[0]=e=>r.isRef(B)?B.value=e:null),disabled:r.unref(x),readonly:r.unref(g),maxlength:r.unref(f),placeholder:e.placeholder,style:u.normalizeStyle(w.value),class:"yc-textarea",onInput:l[1]||(l[1]=e=>j("input",e)),onChange:l[2]||(l[2]=e=>j("change",e)),onFocus:l[3]||(l[3]=e=>m("focus",e)),onBlur:l[4]||(l[4]=e=>m("blur",e))},null,44,n),[[a.vModelText,r.unref(B)]]),k.value?(o.openBlock(),o.createElementBlock("span",i,u.toDisplayString(r.unref(B).length)+" / "+u.toDisplayString(r.unref(f)),1)):o.createCommentVNode("",!0),V.value?(o.openBlock(),o.createBlock(t,{key:2,name:"close",class:"yc-textarea-clear-button",onClick:l[5]||(l[5]=e=>j("clear",e))})):o.createCommentVNode("",!0)],2)}}});module.exports=d;
