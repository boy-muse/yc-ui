"use strict";require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.js");const e=require("../../../node_modules/@vueuse/core/index.js"),o=require("../_hooks/useTriggerVisible.js"),t=require("../_hooks/useTriggerPosition.js"),l=require("../_utils/vue-utils.js"),n=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),u=require("../../../node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js"),a=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js"),r=require("../../../node_modules/@vue/shared/dist/shared.esm-bundler.js"),i=n.defineComponent({name:"Trigger",__name:"index",props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{default:"hover"},position:{default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{default:0},popupTranslate:{default:()=>[0,0]},showArrow:{type:Boolean,default:!1},popuphoverStay:{type:Boolean},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},wrapperClass:{},contentClass:{default:""},contentStyle:{default:()=>({})},arrowClass:{default:""},arrowStyle:{default:()=>({})},animationName:{default:"fade"},duration:{default:400},mouseEnterDelay:{default:100},mouseLeaveDelay:{default:100},focusDelay:{default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},popupContainer:{default:"body"},renderToBody:{type:Boolean,default:!0},autoFitPosition:{type:Boolean,default:!0},updateAtScroll:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},scrollToCloseDistance:{default:.1},clickOutSideIngoreFn:{},mouseenterCallback:{}},emits:["update:popupVisible","popup-visible-change","position-change","show","hide"],setup(i,{expose:s,emit:d}){const p=i,c=d,{popupVisible:f,defaultPopupVisible:m,trigger:v,position:h,popupTranslate:y,popupOffset:C,contentStyle:g,arrowStyle:b,clickToClose:w,blurToClose:B,clickOutsideToClose:k,mouseEnterDelay:T,mouseLeaveDelay:P,preventFocus:F,focusDelay:S,duration:M,autoFitPopupWidth:_,autoFitPopupMinWidth:D,updateAtScroll:V,scrollToClose:x,scrollToCloseDistance:E,autoFitPosition:O,alignPoint:j}=a.toRefs(p),{clickOutSideIngoreFn:q,mouseenterCallback:z}=p,W=a.ref(),A=a.ref(null),N=n.useSlots(),L=n.computed((()=>{var e;return(null==(e=null==N?void 0:N.default)?void 0:e.call(N))??[]})),{computedVisible:$,mouseX:R,mouseY:I,handleMouseenter:H,handleMouseleave:X,handleFocus:Y,handleBlur:G,handleContextmenu:J,handleMousedown:K,handleClick:Q}=o({popupVisible:f,defaultPopupVisible:m,preventFocus:F,trigger:v,clickToClose:w,blurToClose:B,clickOutsideToClose:k,mouseEnterDelay:T,mouseLeaveDelay:P,focusDelay:S,contentRef:W,clickOutSideIngoreFn:q,mouseenterCallback:z,emits:c}),{wrapperPosition:U,contentCss:Z,arrowCss:ee}=function(){if(!L.value.length)return{wrapperPosition:{},contentCss:{},arrowCss:{}};const{left:o,top:l,bottom:u,right:a,width:r,height:i}=e.useElementBounding(A,{windowScroll:V.value}),{width:s,height:d}=e.useElementSize(W,void 0,{box:"border-box"}),{wrapperPosition:p,arrowPostion:f}=t({position:h,left:o,top:l,bottom:u,right:a,mouseX:R,mouseY:I,alignPoint:j,trigger:v,triggerHeight:i,triggerWidth:r,contentHeight:d,contentWidth:s,popupTranslate:y,popupOffset:C,autoFitPosition:O,emits:c}),m=n.computed((()=>({...g.value,width:_.value?`${r.value}px`:"",minWidth:D.value?`${r.value}px`:""}))),w=n.computed((()=>({...f.value,...b.value})));if(x.value){let e=o.value,t=l.value;n.watchEffect((()=>{if(!$.value)return;const n=Math.abs(e-o.value),u=Math.abs(t-l.value);(n>=E.value||u>=E.value)&&($.value=!1),e=o.value,t=l.value}))}return{wrapperPosition:p,contentCss:m,arrowCss:w}}();return s({hide(){$.value=!1},show(){$.value=!0}}),(e,o)=>(n.openBlock(),n.createElementBlock(n.Fragment,null,[(n.openBlock(),n.createBlock(n.resolveDynamicComponent(a.unref(l.findFirstLegitChild)(L.value)),{onClick:a.unref(Q),onContextmenu:u.withModifiers(a.unref(J),["prevent"]),onMouseenter:o[0]||(o[0]=e=>a.unref(H)(!0,e)),onMouseleave:a.unref(X),onFocus:a.unref(Y),onBlur:a.unref(G),ref_key:"triggerRef",ref:A},null,40,["onClick","onContextmenu","onMouseleave","onFocus","onBlur"])),(n.openBlock(),n.createBlock(n.Teleport,{to:e.popupContainer,disabled:!e.renderToBody},[n.createVNode(u.Transition,{name:e.animationName,duration:a.unref(M),onAfterLeave:o[4]||(o[4]=o=>e.$emit("hide")),onAfterEnter:o[5]||(o[5]=o=>e.$emit("show"))},{default:n.withCtx((()=>[!e.unmountOnClose||a.unref($)&&!e.disabled?n.withDirectives((n.openBlock(),n.createElementBlock("div",{key:0,class:r.normalizeClass(["yc-trigger",e.wrapperClass]),style:r.normalizeStyle(a.unref(U)),ref_key:"contentRef",ref:W,onMouseenter:o[1]||(o[1]=e=>a.unref(H)(!1,e)),onMouseleave:o[2]||(o[2]=(...e)=>a.unref(X)&&a.unref(X)(...e)),onMousedown:o[3]||(o[3]=(...e)=>a.unref(K)&&a.unref(K)(...e))},[n.createElementVNode("div",{class:r.normalizeClass(["yc-trigger-content",e.contentClass]),style:r.normalizeStyle(a.unref(Z))},[n.renderSlot(e.$slots,"content",{},void 0,!0)],6),e.showArrow?(n.openBlock(),n.createElementBlock("div",{key:0,class:r.normalizeClass(["yc-trigger-arrow",e.arrowClass]),style:r.normalizeStyle(a.unref(ee))},null,6)):n.createCommentVNode("",!0)],38)),[[u.vShow,a.unref($)&&!e.disabled]]):n.createCommentVNode("",!0)])),_:3},8,["name","duration"])],8,["to","disabled"]))],64))}});module.exports=i;
