"use strict";const e=require("../Trigger/constants.js");require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.js");const l=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js"),t=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js");module.exports=u=>{const{position:a,left:v,top:r,bottom:o,right:i,trigger:s,mouseX:n,mouseY:d,alignPoint:c,triggerHeight:p,triggerWidth:b,contentHeight:f,contentWidth:h,popupTranslate:m,popupOffset:g,autoFitPosition:W,emits:x}=u,w=l.ref(a.value);return{wrapperPosition:t.computed((()=>{const{offsetX:e,offsetY:l}=function(){const[e,l]=m.value;let t=e,u=l;w.value.startsWith("t")?u=-g.value:w.value.startsWith("b")?u=g.value:w.value.startsWith("l")?t=-g.value:w.value.startsWith("r")&&(t=g.value);return{offsetX:t,offsetY:u}}();if(c.value&&["click","contextMenu"].includes(s.value))return{top:`${d.value+l}px`,left:`${n.value-h.value/2+e}px`};let t=0,u=0;return["top","tl","tr","bottom","bl","br"].includes(a.value)?(t=a.value.startsWith("t")?r.value-f.value:o.value,u=["top","bottom"].includes(a.value)?v.value+(b.value-h.value)/2:["tl","bl"].includes(a.value)?v.value:i.value-h.value):(u=a.value.startsWith("l")?v.value-h.value:i.value,t=["left","right"].includes(a.value)?r.value+(p.value-f.value)/2:["lt","rt"].includes(a.value)?r.value:o.value-f.value),W.value?(["top","tl","tr","bottom","bl","br"].includes(a.value)?(t<0&&["top","tl","tr"].includes(a.value)?t=o.value:t+f.value>window.innerHeight&&["bottom","bl","br"].includes(a.value)&&(t=r.value-f.value),u<0?u=v.value:u+h.value>window.innerWidth&&(u=i.value-h.value)):(u<0&&["left","lt","lb"].includes(a.value)?u=i.value:u+h.value>window.innerWidth&&["right","rt","rb"].includes(a.value)&&(u=v.value-h.value),t<0?t=r.value:t+f.value>window.innerHeight&&(t=r.value-f.value)),w.value=function(e,l){const t=1e-5,u=[[r.value-f.value,v.value+(b.value-h.value)/2,"top"],[r.value-f.value,v.value,"tl"],[r.value-f.value,i.value-h.value,"tr"],[o.value,v.value+(b.value-h.value)/2,"bottom"],[o.value,v.value,"bl"],[o.value,i.value-h.value,"br"],[r.value+(p.value-f.value)/2,v.value-h.value,"left"],[r.value,v.value-h.value,"lt"],[o.value-f.value,v.value-h.value,"lb"],[r.value+(p.value-f.value)/2,i.value,"right"],[r.value,i.value,"rt"],[o.value-f.value,i.value,"rb"]];for(const[a,v,r]of u)if(Math.abs(a-l)<t&&Math.abs(v-e)<t)return r;return a.value}(u,t),x("position-change",w.value),{top:`${t+l}px`,left:`${u+e}px`}):{top:`${t+l}px`,left:`${u+e}px`}})),arrowPostion:t.computed((()=>{let l;if(["top","tl","tr","bottom","bl","br"].includes(w.value)){let e="";e=["top","bottom"].includes(w.value)?h.value/2:b.value/2,l={top:w.value.startsWith("b")?"0":"",bottom:w.value.startsWith("t")?"0":"",left:`${e}px`}}else{let e="",t="";["left","right"].includes(w.value)?e=f.value/2:["lt","rt"].includes(w.value)?e=p.value/2:t=p.value/2,l={top:`${e}px`,right:w.value.startsWith("l")?"0":"",bottom:`${t}px`,left:w.value.startsWith("r")?"0":""}}return{...l,...e.BORDER_MAP[w.value],...e.BORDER_RADIUS_MAP[w.value],transform:`${e.TRANSLATE_MAP[w.value]} rotate(45deg)`}}))}};
