"use strict";require("../../../node_modules/vue/dist/vue.runtime.esm-bundler.js");const e=require("../../../node_modules/@vueuse/core/index.js"),u=require("./useControlValue.js"),l=require("../../../node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js"),a=require("../../../node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js");module.exports=o=>{const{trigger:t,popupVisible:v,defaultPopupVisible:s,clickToClose:i,blurToClose:r,clickOutsideToClose:n,mouseEnterDelay:c,mouseLeaveDelay:d,focusDelay:m,preventFocus:p,contentRef:T,clickOutSideIngoreFn:f,mouseenterCallback:b,emits:h}=o,g=u(v,s.value,(e=>{h("update:popupVisible",e),h("popup-visible-change",e)})),C=l.inject("timeout",a.ref());l.provide("timeout",C);const k=a.ref(0),j=a.ref(0);return n.value&&e.onClickOutside(T,(async e=>{const u=f&&f(e.target??e);g.value&&!u&&(C.value=setTimeout((()=>{g.value=!1}),0))})),{mouseX:k,mouseY:j,computedVisible:g,handleMousedown:e=>{p.value&&e.preventDefault()},handleClick:e=>{if(C.value&&clearTimeout(C.value),"click"!=t.value)return;const{pageX:u,pageY:l}=e;k.value=u,j.value=l,g.value=!i.value||!g.value},handleMouseenter:(e,u)=>{b&&b(e,u),C.value&&clearTimeout(C.value),"hover"!=t.value||g.value||(C.value=setTimeout((()=>{g.value=!0}),c.value))},handleMouseleave:()=>{C.value&&clearTimeout(C.value),"hover"==t.value&&g.value&&(C.value=setTimeout((()=>{g.value=!1}),d.value))},handleFocus:()=>{C.value&&clearTimeout(C.value),"focus"!=t.value||g.value||(C.value=setTimeout((()=>{g.value=!0}),m.value))},handleBlur:()=>{C.value&&clearTimeout(C.value),"focus"==t.value&&r.value&&g.value&&(g.value=!1)},handleContextmenu:e=>{if(C.value&&clearTimeout(C.value),"contextMenu"!=t.value)return;const{pageX:u,pageY:l}=e;k.value=u,j.value=l,g.value=!i.value||!g.value}}};
